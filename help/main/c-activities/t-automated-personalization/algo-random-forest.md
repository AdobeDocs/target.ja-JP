---
keywords: ランダムフォレスト；デシジョンツリー；ap;Automated Personalization
description: 方法を学ぶ [!DNL Adobe Target] では、 [!UICONTROL Automated Personalization] (AP) および [!UICONTROL 自動ターゲット] アクティビティ。
title: 方法 [!DNL Target] ランダムフォレストアルゴリズムを使用しますか？
badgePremium: label="Premium" type="Positive" url="https://experienceleague.adobe.com/docs/target/using/introduction/intro.html?lang=ja#premium newtab=true" tooltip="Target Premium に含まれる機能を確認してください。"
feature: Automated Personalization
exl-id: 07a89525-4071-4434-ac96-c59a4f4422ad
source-git-commit: d5b24f298ae405d57c2ba639082cbe99c4e358fd
workflow-type: tm+mt
source-wordcount: '1431'
ht-degree: 43%

---

# ランダムフォレストアルゴリズム

(AP) と [!DNL Auto-Target] アクティビティはランダムフォレストです。 ランダムフォレストなどのアンサンブル手法では、複数の学習アルゴリズムを使用して、どの構成学習アルゴリズムを使用した場合よりも優れた予測パフォーマンスを実現します。 のランダムフォレストアルゴリズム [!UICONTROL Automated Personalization] および [!UICONTROL 自動ターゲット] は、トレーニング中に多数のデシジョンツリーを構築することで機能する分類または回帰手法です。

統計学の観点から見ると、結果の予測に使用される単一の回帰モデルが思い浮かぶかもしれません。データサイエンスの最新の調査では、同一のデータセットから複数のモデルが構築され、効果的に組み合わせられる「アンサンブル手法」の方が、単一のモデルだけで予測する場合よりも結果が優れていることが示されています。

ランダムフォレストアルゴリズムは、 [!UICONTROL Automated Personalization] および [!UICONTROL 自動ターゲット] アクティビティ。 ランダムフォレストは、数百の決定木を組み合わせて、1 つの木だけでは実現できない、より良い予測を実現します。

## デシジョンツリーとは {#section_7F5865D8064447F4856FED426243FDAC}

デシジョンツリーの目標は、システムが学習できるすべての使用可能な訪問データを分類し、そのデータをグループ化することです。このグループでは、各訪問が目標指標に関して可能な限り似ています。 ただし、グループ間では、目標指標（コンバージョン率など）に関する訪問回数ができる限り異なります。 デシジョンツリーでは、トレーニングセット内の様々な変数を調べて、相互に排他的な集計的網羅 (MECE) 方式でデータをこれらのグループ（または「葉」）に分割し、この目標を最大化する方法を決定します。

簡単な例で、2 つの入力変数があるとします。

* 性別（値は男性と女性の 2 つ）
* 郵便番号 ( 小さなデータセットに 5 つの潜在的な値 (11111、22222、33333、44444、55555)

目標指標がコンバージョンの場合、ツリーはまず、訪問データのコンバージョン率の変動量が最も大きい 2 つの変数のどれを説明するかを決定します。

郵便番号が最も予測的だとします。この変数がデシジョンツリーの最初の「ブランチ」を形成します。続いて、訪問データをどう分割するかを判断します。各グループ内のレコードのコンバージョン率はできる限り差異が小さく、各グループ間のコンバージョン率はできる限り差異が大きくなるようにするといった具合です。この例では、11111、22222、33333が 1 つの分割で、44444、55555が 2 つ目の分割であるとします。

この操作により、デシジョンツリーの最初のレイヤーが次のようになります。

![decsion_tree_1 image](assets/decsion_tree_1.png)

デシジョンツリーによって、「最も予測的な変数は何ですか？」という質問が表示されます。 この例では、変数が 2 つだけなので、ここでの答えは明らかに性別です。 データを分割する場合と同様の演習が完了するようにツリーが調べられます。 *各分岐内*. まず、11111、22222、33333 のブランチを見てみましょう。これらの郵便番号で、男性と女性でコンバージョン率に差異がある場合は、リーフは男性と女性の 2 つになり、このブランチの処理はそれで完了します。その他の分岐では、44444と55555で、女性と男性のコンバージョンに統計的な違いがないとします。 この場合、1 つ目のブランチが最後の分割となります。

この例では、次のツリーになります。

![decsion_tree_2 image](assets/decsion_tree_2.png)

## ランダムフォレストではデシジョンツリーをどのように使用しますか？ {#section_536C105EF9F540C096D60450CAC6F627}

デシジョンツリーは効果的な統計ツールになりますが、デメリットもあります。最も大きなデメリットは、データの「オーバーフィッティング」が生じ、1 つのデシジョンツリーで、最初のデシジョンツリーの構築に使用されていない将来のデータの予測精度が悪くなる場合があるという点です。これは、統計学習における[バイアス／バリアンストレードオフ](https://en.wikipedia.org/wiki/Bias%E2%80%93variance_tradeoff)と呼ばれる問題です。ランダムフォレストは、この過剰適合の問題を解決するのに役立ちます。 ランダムフォレストは簡単に言うと、同一のデータセットを基に、わずかに違う形で構築されたデシジョンツリーの集合で、「投票」によって単一のデシジョンツリーよりも優れたモデルを生成します。ツリーは、置換（バグ付け）を伴う訪問レコードのサブセットをランダムに選択し、属性のサブセットをランダムに選択することで構築されます。これにより、フォレストは少し異なるデシジョンツリーで構成されます。 この手法では、ランダムフォレストに構築されたデシジョンツリーにわずかなバリエーションが生まれます。この適度な量のバリエーションを追加することで、アルゴリズムの予測精度が高まります。

## 方法 [!DNL Target] パーソナライゼーションアルゴリズムがランダムフォレストを使用しますか？ {#section_32FB53CAD8DF40FB9C0F1217FBDBB691}

### モデルの構築方法

次の図は、のモデル構築の概要を示しています。 [!UICONTROL 自動ターゲット] および [!UICONTROL Automated Personalization] アクティビティ：

![random_forest_flow イメージ](assets/random_forest_flow.png){width="650" zoomable="yes"}

1. Target は、エクスペリエンスまたはオファーをランダムに提供しながら訪問者に関するデータを収集します
1. 後 [!DNL Target] は、データの重要な量に到達し、 [!DNL Target] 機能エンジニアリングを実行
1. [!DNL Target] エクスペリエンスまたはオファーごとにランダムフォレストモデルを作成します
1. [!DNL Target] モデルがしきい値の品質スコアを満たしているかどうかを確認します
1. [!DNL Target] モデルを実稼動環境にプッシュして、今後のトラフィックをパーソナライズします。

[!DNL Target] は、自動的に収集したデータとユーザーが提供するカスタムデータを使用して、パーソナライゼーションアルゴリズムを構築します。 このモデルによって、訪問者に表示する最適なエクスペリエンスやオファーが予測されます。一般に、エクスペリエンスごとに 1 つのモデルが構築されます ( [!UICONTROL 自動ターゲット] アクティビティ ) またはオファー ( [!UICONTROL Automated Personalization] アクティビティ )。 [!DNL Target] 次に、最も高い予測成功指標（コンバージョン率など）を生むエクスペリエンスまたはオファーを表示します。 これらのモデルは、予測に使用する前に、ランダムに割り当てられた訪問を対象にトレーニングをおこなう必要があります。そのため、アクティビティが開始されると、パーソナライゼーションアルゴリズムの準備が整うまで、パーソナライズ対象のグループに入っている訪問者にも複数のエクスペリエンスまたはオファーが配信されます。

各モデルは、アクティビティで使用される前に、訪問者の行動を予測するのに適しているかどうかを検証する必要があります。 モデルは、曲線の下の面積 (AUC) に基づいて検証されます。 検証が必要なので、モデルがパーソナライズされたエクスペリエンスの提供を開始する正確な時間は、データの詳細に応じて異なります。 トラフィックのプランニングの観点からの目安としては、モデルが有効になるまでには、最低限のコンバージョン数が必要になるのが一般的です。

エクスペリエンスまたはオファーのモデルが有効になると、エクスペリエンスまたはオファー名の左にある時計のアイコンが緑色のチェックボックスに変わります。少なくとも 2 つのエクスペリエンスまたはオファーに対して有効なモデルがある場合、一部の訪問はパーソナライズされ始めます。

### 特徴変換

データはパーソナライゼーションアルゴリズムに送られる前に、特徴変換がおこなわれます。特徴変換は、パーソナライゼーションモデルで使用するために、トレーニングレコードの収集データを準備する処理です。

特徴変換は属性のタイプによって異なります。属性（データサイエンティストは「特徴」と呼ぶこともあります）は次の 2 種類に大別されます。

* **分類：**&#x200B;分類特徴はカウントできませんが、様々なグループに分類できます。分類特徴には、国、性別、郵便番号などがあります。
* **数値：**&#x200B;数値特徴は測定やカウントが可能で、年齢や収入などがあります。

分類特徴の場合、可能なすべての特徴のセットが保持され、尤度変換を使用してデータサイズが低減されます。数値フィーチャの場合、再スケーリングを行うと、機能がボード全体で比較可能になります。

### マルチアームバンディットによる学習とパーソナライズのバランス調整

後 [!DNL Target] には、トラフィックをパーソナライズするために構築されたパーソナライゼーションモデルがあり、アクティビティの今後の訪問者に対しては明確なトレードオフがあります。 現在のモデルに基づいてすべてのトラフィックをパーソナライズする必要がある場合や、ランダムにオファーを提供することで新しい訪問者から学び続ける必要がある場合は、 パーソナライゼーションアルゴリズムによって訪問者に関する新たなトレンドを見つけ出すための学習を常におこないながら、トラフィックの大部分をパーソナライズできれば効果的です。

マルチアームバンディットは次のようになります。 [!DNL Target] は、この目標を達成するのに役立ちます。 マルチアームバンディットでは、モデルは常にトラフィックのごく一部を「消費」して、アクティビティ学習の全期間を通じて学習を継続し、それまでに学習したトレンドの乱用を防止します。

データ科学の世界では、マルチアームバンディットの問題は、探索と搾取のジレンマの古典的な例で、それぞれ報酬の確率が不明なワンアームバンディットのコレクションが与えられます。 重要なのは、プレーの成功率が最も高く、受け取られる報酬の合計が最大となるアームを生む戦略を開発することです。マルチアームバンディットは、オンラインモデルの構築後に、オンラインスコアリングのためにシステムで使用されます。 このプロセスは、調査中のオンライン学習に役立ちます。 現在のマルチアームアルゴリズムは、Epsilon(ε)Greedy アルゴリズムです。 このアルゴリズムでは、確率 1- ε の場合に、最適なアームが選択され、確率 ε の場合は、その他のアームがランダムに選択されます。
