---
keywords: レコメンデーションキー；レコメンデーションロジック；現在のカテゴリ；カスタム属性；最後の購入品目；最後の閲覧品目；最後の閲覧品目；お気に入りのカテゴリ；人気；最後の閲覧品目；最後の閲覧；最後の閲覧；最後の閲覧
description: 訪問者の行動コンテキストを使用して関連性の高い結果をAdobeに表示するキーに基づくレコメンデーションの使用方法を説明します。 [!DNL Target] Recommendationsアクティビティ。
title: レコメンデーションキーに基づくレコメンデーションの設定方法
feature: Recommendations
mini-toc-levels: 2
exl-id: 49764f18-88fb-41be-b2a0-e7ced9de742c
source-git-commit: cc260620cf87feebcd4c43f45f05406ac845cf5b
workflow-type: tm+mt
source-wordcount: '3850'
ht-degree: 41%

---

# レコメンデーションキーに基づくレコメンデーションの設定

アルゴリズムに基づくRecommendationsは、訪問者の行動コンテキストを使用して、関連する結果を [!DNL Adobe Target] [!DNL Recommendations] アクティビティ。

には 5 つのアルゴリズムタイプがあります [!DNL Target Recommendations]:

* [!UICONTROL 買い物かごベース]
* [!UICONTROL 人気度ベース]
* [!UICONTROL 項目ベース]
* [!UICONTROL ユーザーベース]
* [!UICONTROL カスタム条件]

次の表に示すように、各アルゴリズムタイプは、そのタイプに適した異なるアルゴリズムを提供します。

>[!NOTE]
>
>この [!UICONTROL 買い物かごベース] タイプは、近日公開予定です。

| アルゴリズムタイプ | 使用するタイミング | 利用可能なアルゴリズム |
| --- | --- | --- |
| [!UICONTROL 買い物かごベース] | （近日公開）ユーザーの買い物かごの内容に基づいてレコメンデーションをおこないます。 | <ul><li>これらを閲覧した人がそれらを閲覧しました</li><li>これらを閲覧した人が購入したもの</li><li>これらを購入した人が購入したもの</li></ul> |
| [!UICONTROL 人気度ベース] | サイト全体での品目の全体的な人気度に基づいて、またはユーザーのお気に入りまたは最も多く閲覧されたカテゴリ、ブランド、ジャンルなど内の品目の人気度に基づいてレコメンデーションをおこないます。 | <ul><li>サイト全体で最も多く閲覧された</li><li>カテゴリ別の最も多く閲覧された項目</li><li>品目属性別最も多く閲覧された品目</li><li>サイト全体のトップセラー</li><li>カテゴリ別のトップセラー</li><li>品目属性別トップセラー</li><li>Analytics 指標別の上位</li></ul> |
| [!UICONTROL 項目ベース] | ユーザーが現在表示している品目や最近表示した品目に類似した品目を見つけることに基づいてレコメンデーションをおこないます。 | <ul><li>これを閲覧した人が他に閲覧したもの</li><li>これを閲覧した人が購入したもの</li><li>これを購入した人が他に購入したもの</li><li>類似の属性を持つ品目</li></ul> |
| [!UICONTROL ユーザーベース] | ユーザーの行動に基づいてレコメンデーションをおこなう。 | <ul><li>最近表示された項目</li><li>お勧め</li></ul> |
| [!UICONTROL カスタム条件] | アップロードしたカスタムファイルに基づいてレコメンデーションをおこないます。 | <ul><li>カスタムアルゴリズム</li></ul> |

各条件は独自のタブで定義されます。トラフィックは、異なる条件のテスト全体で等しく分割されます。つまり、2 つの条件がある場合、トラフィックは等しく 2 分割されます。2 つの条件と 2 つのデザインがある場合、トラフィックは 4 つの組み合わせに対して等しく分割されます。さらに、比較のために、デフォルトコンテンツを表示するサイト訪問者の割合も指定できます。この場合、指定した割合の訪問者にデフォルトコンテンツが表示され、残りの割合は条件とデザインの組み合わせの間で分割されます。

条件の作成、およびそのアルゴリズムのタイプとアルゴリズムの定義について詳しくは、 [条件の作成](/help/c-recommendations/c-algorithms/create-new-algorithm.md).

異なるレコメンデーションアルゴリズムは、異なるタイプのページに配置するのに役立ちます。 各アルゴリズムのタイプと使用可能なアルゴリズムについて詳しくは、次の節を参照してください。

## 買い物かごベース {#cart-based}

この [!UICONTROL 買い物かごベース] アルゴリズムタイプを使用すると、訪問者の現在の買い物かごの内容に基づいてレコメンデーションされる品目を指定できます。

買い物かごベースのレコメンデーションロジックは、「[!UICONTROL お勧め]」ユーザーベースのアルゴリズムと[!UICONTROL これらを閲覧した人が購入したもの]&quot;および&quot;[!UICONTROL これらを購入した人が購入したもの]」項目ベースのアルゴリズム。

[!DNL Target] は、協調フィルタリング手法を使用して訪問者の買い物かごの各項目の類似点を判断し、各項目のこれらの行動の類似点を組み合わせて結合リストを取得します。

[!DNL Target] また、マーケターは、1 回のセッション内または複数のセッションにわたる訪問者の行動を確認するかどうかを選択できます。

* **1 回のセッション内**:1 回のセッションでの他の訪問者の行動に基づきます。

   1 つのセッション内の行動を見ると、使用状況、機会、イベントに基づいて製品が強く「付き合う」という意味がある場合に意味があります。 例えば、訪問者がプリンターを購入していて、インクや紙も必要になる場合があります。 または、訪問者はピーナッツバターを購入し、パンとゼリーも必要になる可能性があります。

* **複数のセッションにわたる**:複数のセッションで他の訪問者がおこなった操作に基づきます。

   複数のセッションをまたいで行動を見ると、訪問者の好みや好みに基づいて製品が強く「付き合う」という感覚がある場合、意味があります。 例えば、訪問者は Star Wars が好きで、同じ席で両方の映画を視聴したくない場合でも、Indiana Jones が好きになる可能性があります。 また、訪問者は、ボードゲーム「コードネーム」が好きで、ボードゲーム「アバロン」も好む場合があります。 

[!DNL Target] は、1 回のセッション内での訪問者の行動と複数のセッションにわたる訪問者の行動のどちらを調べるかに関係なく、現在の買い物かご内の品目に基づいて各訪問者にレコメンデーションをおこないます。

では、次のアルゴリズムを使用できます [!UICONTROL 買い物かごベース] アルゴリズムタイプ：

### [!UICONTROL これを閲覧した人がこれらを閲覧しました]

指定した品目が閲覧された同じセッションで、閲覧される頻度が最も高い品目をレコメンドします。

このロジックは、顧客がこのロジックを表示した後に閲覧した他の製品を返します。指定した製品は結果セットに含まれません。

このロジックを使用すると、ある品目を閲覧した他の訪問者がも閲覧した品目をレコメンデーションすることで、追加のコンバージョンの機会を作成できます。 例えば、サイトで道路の自転車を見た訪問者は、バイクのヘルメット、サイクリングキット、ロックなどを見ることもできます。 他の製品が売上高の増加に役立つことを示唆する、このロジックを使用してレコメンデーションを作成できます。

このアルゴリズムを選択した場合、次のRecommendationsキーを選択できます。

* 現在の品目
* 最後に購入された品目
* 最後に閲覧された品目
* 最も多く閲覧された品目

### これを閲覧した人が購入したもの

指定した品目が閲覧された同じセッションで、購入される頻度が最も高い品目をレコメンドします。この条件によって、顧客が指定の商品を閲覧した後で購入した他の商品が返されるので、指定した商品は結果セットに含まれません。

このロジックは、顧客がこの製品を表示した後に購入した他の製品を返します。指定した製品は結果セットに含まれません。

このロジックを使用すると、例えば、品目を閲覧した他の訪問者が購入した品目を表示するレコメンデーションを製品ページに表示して、クロス販売の機会を増やすことができます。 例えば、訪問者が釣竿を閲覧している場合、レコメンデーションには、タックルボックス、ワッダー、釣り用品など、他に購入した品目が表示される場合があります。 訪問者がサイトを閲覧する際に、追加の購入レコメンデーションを提供します。

このアルゴリズムを選択した場合、次のRecommendationsキーを選択できます。

* 現在の品目
* 最後に購入された品目
* 最後に閲覧された品目
* 最も多く閲覧された品目

### これを購入した人が他に購入したもの

指定した品目と同時に顧客に購入される頻度が最も高い品目をレコメンドします。

このロジックは、顧客がこの製品を購入した後に購入した他の製品を返します。指定した製品は結果セットに含まれません。

このロジックを使用すると、例えば、他の購入者が購入した品目も表示するレコメンデーションを買い物かごの概要ページに表示して、クロス販売の機会を増やすことができます。 例えば、訪問者がスーツを購入する場合、レコメンデーションでは、ネクタイ、ドレスシューズ、カッフリンクなど、他の訪問者がスーツと共に購入した品目を表示することができます。 訪問者が購入をレビューする際に、追加のレコメンデーションを提供します。

このアルゴリズムを選択した場合、次のRecommendationsキーを選択できます。

* 現在の品目
* 最後に購入された品目
* 最後に閲覧された品目
* 最も多く閲覧された品目

## [!UICONTROL 人気度ベース]

この [!UICONTROL 人気度ベース] アルゴリズムタイプを使用すると、サイトでの品目の全体的な人気度に基づいて、またはユーザーのお気に入りまたは最も多く閲覧されたカテゴリ、ブランド、ジャンルなど内の品目の人気度に基づいてレコメンデーションをおこなうことができます。

では、次のアルゴリズムを使用できます [!UICONTROL 人気度ベース] アルゴリズムタイプ：

### サイト全体で最も多く閲覧された {#most-viewed}

レコメンデーションは、最も頻繁に閲覧された品目によって決定されます。 これは次のように動作するリーセンシー／頻度条件により決定されます。

* 初回の商品閲覧は 10 ポイント
* 以降の閲覧は毎回 5 ポイント
* セッションの終わりにすべての値を 2 で割る

例えば、1 つのセッションで surfboardA を閲覧後に surfboardB を閲覧すると、その結果は A：10、B：5 になります。セッションが終了すると、A は以下のようになります。5, B:2.5.次のセッションで同じ項目を表示した場合、値は A に変わります。15 B:7.5.

ホームまたはランディングページとオフサイト広告など、一般的なページでこのアルゴリズムを使用します。

### カテゴリ別の最も多く閲覧された項目 {#most-viewed-category}

レコメンデーションは、最も多くのアクティビティを受信したカテゴリによって決定されます。商品ではなくカテゴリにポイントが付けられることを除き、「最も多く閲覧された品目」と同じメソッドを採用します。

これは次のように動作するリーセンシー／頻度条件により決定されます。

* 初回のカテゴリ閲覧は 10 ポイント
* 以降の閲覧は毎回 5 ポイント

最初に訪問したカテゴリには、10 ポイントが付与されます。同じカテゴリへの次の訪問には、5 ポイントが付与されます。訪問ごとに、以前表示した現在のカテゴリ以外のカテゴリは、1 ポイントずつ減点されます。

例えば、1 つのセッションでカテゴリ A を閲覧後にカテゴリ B を閲覧すると、その結果は A：9、B：10 になります。次のセッションで同じ品目を閲覧すると、値は 「A：20 B：9」 に変化します。

ホームまたはランディングページとオフサイト広告など、一般的なページでこのアルゴリズムを使用します。

「カテゴリ別の最も多く閲覧された」アルゴリズムを選択した場合、次のRecommendationsキーを選択できます。

* 現在のカテゴリ
* お気に入りのカテゴリ

### 品目属性別最も多く閲覧された品目

（情報はまもなく公開されます）

### サイト全体のトップセラー {#top-sellers}

サイト全体で最も完了した注文に含まれる項目を表示します。 1 回の注文で同じ品目が複数含まれていても、1 回の注文としてカウントします。

このアルゴリズムを使用すると、サイトでトップセルの品目に関するレコメンデーションを作成して、コンバージョンと売上高を増やすことができます。 このロジックは、サイトへの初回訪問者に特に適しています。

### カテゴリ別のトップセラー

最も完了した注文に含まれる品目をカテゴリ別に表示します。 1 回の注文で同じ品目が複数含まれていても、1 回の注文としてカウントします。

このアルゴリズムを使用すると、カテゴリに基づいてサイトでトップセルの品目に関するレコメンデーションを作成し、コンバージョンと売上高を増やすことができます。 このロジックは、サイトへの初回訪問者に特に適しています。

「カテゴリ別の最も多く閲覧された」アルゴリズムを選択した場合、次のRecommendationsキーを選択できます。

* 現在のカテゴリ
* お気に入りのカテゴリ

### 品目属性別トップセラー

（情報はまもなく公開されます）

### Analytics 指標別の上位

（情報はまもなく公開されます）

## [!UICONTROL 項目ベース]

この [!UICONTROL 項目ベース] レコメンデーションタイプを使用すると、ユーザーが現在閲覧中または最近閲覧した品目に類似した品目を見つけることに基づいてレコメンデーションをおこなうことができます。

では、次のアルゴリズムを使用できます [!UICONTROL 項目ベース] アルゴリズムタイプ：

### これを閲覧した人が他に閲覧したもの {#viewed-viewed}

指定した品目が閲覧された同じセッションで、閲覧される頻度が最も高い品目をレコメンドします。

このロジックは、顧客がこのロジックを表示した後に閲覧した他の製品を返します。指定した製品は結果セットに含まれません。

このロジックを使用すると、ある品目を閲覧した他の訪問者がも閲覧した品目をレコメンデーションすることで、追加のコンバージョンの機会を作成できます。 例えば、サイトで道路の自転車を見た訪問者は、バイクのヘルメット、サイクリングキット、ロックなどを見ることもできます。 他の製品が売上高の増加に役立つことを示唆する、このロジックを使用してレコメンデーションを作成できます。

このアルゴリズムを選択した場合、次のRecommendationsキーを選択できます。

* 現在の品目
* 最後に購入された品目
* 最後に閲覧された品目
* 最も多く閲覧された品目

### これを閲覧した人が購入したもの {#viewed-bought}

指定した品目が閲覧された同じセッションで、購入される頻度が最も高い品目をレコメンドします。この条件によって、顧客が指定の商品を閲覧した後で購入した他の商品が返されるので、指定した商品は結果セットに含まれません。

このロジックは、顧客がこの製品を表示した後に購入した他の製品を返します。指定した製品は結果セットに含まれません。

このロジックを使用すると、例えば、品目を閲覧した他の訪問者が購入した品目を表示するレコメンデーションを製品ページに表示して、クロス販売の機会を増やすことができます。 例えば、訪問者が釣竿を閲覧している場合、レコメンデーションには、タックルボックス、ワッダー、釣り用品など、他に購入した品目が表示される場合があります。 訪問者がサイトを閲覧する際に、追加の購入レコメンデーションを提供します。

このアルゴリズムを選択した場合、次のRecommendationsキーを選択できます。

* 現在の品目
* 最後に購入された品目
* 最後に閲覧された品目
* 最も多く閲覧された品目

### これを購入した人が他に購入したもの {#bought-bought}

指定した品目と同時に顧客に購入される頻度が最も高い品目をレコメンドします。

このロジックは、顧客がこの製品を購入した後に購入した他の製品を返します。指定した製品は結果セットに含まれません。

このロジックを使用すると、例えば、他の購入者が購入した品目も表示するレコメンデーションを買い物かごの概要ページに表示して、クロス販売の機会を増やすことができます。 例えば、訪問者がスーツを購入する場合、レコメンデーションでは、ネクタイ、ドレスシューズ、カッフリンクなど、他の訪問者がスーツと共に購入した品目を表示することができます。 訪問者が購入をレビューする際に、追加のレコメンデーションを提供します。

このアルゴリズムを選択した場合、次のRecommendationsキーを選択できます。

* 現在の品目
* 最後に購入された品目
* 最後に閲覧された品目
* 最も多く閲覧された品目

### 類似の属性を持つ品目 {#similar-attributes}

現在のページアクティビティまたは過去の訪問者の行動に基づいた品目またはメディアに類似した品目またはメディアをレコメンドします。

類似の属性を持つ品目/メディアを選択した場合、コンテンツの類似性ルールを設定できます。

コンテンツの類似性を使用してレコメンデーションを生成することは、特に新規品目に対して有効です。新規品目は、過去の行動に基づく、これを閲覧した人、その他のロジックを使用したレコメンデーションでは表示されにくくなります。 また、コンテンツの類似性を使用すると、過去の購入などの履歴データがない新規訪問者に対する便利なレコメンデーションを生成することもできます。

このアルゴリズムを選択した場合、次のRecommendationsキーを選択できます。

* 現在の品目
* 最後に購入された品目
* 最後に閲覧された品目
* 最も多く閲覧された品目

詳しくは、 [コンテンツの類似性](/help/c-recommendations/c-algorithms/create-new-algorithm.md#similarity).

## [!UICONTROL ユーザーベース]

ユーザーベースのアルゴリズムタイプを使用すると、ユーザーの行動に基づいてレコメンデーションをおこなうことができます。

では、次のアルゴリズムを使用できます [!UICONTROL ユーザーベース] アルゴリズムタイプ：

### 最近表示された項目 {#recently-viewed}

訪問者の履歴（複数セッションにわたる）を使用して、デザインのスロット数に基づいて、訪問者が閲覧した最後の *x* 品目を提示します。

「最近表示された項目」アルゴリズムは、特定の [環境](/help/administrating-target/hosts.md). 別々の環境に属する 2 つのサイトがあり、訪問者がそれらのサイト間を移動した場合、各サイトでは、そのサイトで最近表示された項目のみが表示されます。同じ環境に属する 2 つのサイトがあり、訪問者がそれらのサイト間を移動した場合、訪問者には、両方のサイトで最近表示された同じ項目が表示されます。

>[!NOTE]
>
>次を使用することはできません： [!UICONTROL 最近表示された項目] 代替レコメンデーションの条件。

最近表示された項目／メディアは、フィルターを適用し、特定の属性を含む項目のみを表示できます。

* 最近表示された項目の条件は、レコメンデーションの他の条件と同じように変更可能です。
* 他の条件と同じ方法で、[コレクション](/help/c-recommendations/c-products/collections.md)、[除外](/help/c-recommendations/c-products/exclusions.md)、および[インクルージョン](/help/c-recommendations/c-algorithms/use-dynamic-and-static-inclusion-rules.md)（価格および在庫用の特殊なルールも含む）を使用できます。

複数のビジネスを持つ多国籍企業の場合、複数のデジタルプロパティにわたって訪問者が項目を表示できる可能性があります。 その場合は、最近表示した項目をレコメンデーションする場所を、それが表示された各プロパティのみに制限できます。これにより、最近表示された項目が別のデジタルプロパティのサイトに表示されるのを防ぎます。

ホームまたはランディングページとオフサイト広告など、一般的なページでこのアルゴリズムを使用します。

>[!NOTE]
>
>[!UICONTROL 最近表示された項目] は、アクティビティの除外グローバル設定と選択されたコレクション設定の両方を考慮します。 項目がグローバルな除外によって除外された場合、または選択したコレクションに含まれていない場合は、表示されません。したがって、 [!UICONTROL 最近表示された項目] 条件の場合は、通常、「すべてのコレクション」設定を使用する必要があります。

### お勧め {#recommended-for-you}

各訪問者の閲覧、表示および購入履歴に基づいて品目をレコメンドします。

このアルゴリズムを使用すると、新規訪問者と再訪問者の両方に対して、パーソナライズされたコンテンツとエクスペリエンスを提供できます。 レコメンデーションのリストは、訪問者の最新のアクティビティに対して重み付けされ、セッション内で更新され、ユーザーがサイトを閲覧する際にパーソナライズされます。

レコメンデーション品目は、表示と購入の両方を使用して決定されます。 指定したレコメンデーションキー（「現在の項目」など）は、選択したインクルージョンルールフィルターの適用に使用されます。

例えば、次のことができます。

* 特定の条件を満たさない品目（在庫切れの製品、30 日以上前に公開された記事、R と評価された映画など）を除外します。
* 含まれる項目を 1 つのカテゴリまたは現在のカテゴリに制限します。

このアルゴリズムを選択した場合、次の「フィルターキー」を選択できます。

* 現在の品目
* 最後に購入された品目
* 最後に閲覧された品目
* 最も多く閲覧された品目

## カスタム条件 {#custom}

「カスタム条件」アルゴリズムタイプを使用すると、アップロードしたカスタムファイルに基づいてレコメンデーションをおこなうことができます。

レコメンデーションは、2 つの属性（user.*x* または profile.*x* 属性）のどちらかを使用して、訪問者のプロファイルに格納された品目によって決定されます。

このオプションを選択した場合、`entity.id` の値がプロファイル属性に存在する必要があります。

レコメンデーションをカスタム属性に基づいておこなう場合、カスタム属性を選択してからレコメンデーションタイプを選択する必要があります。

カスタム条件の出力にリアルタイムでフィルターを適用することができます。例えばレコメンデーション品目を、訪問者のお気に入りのカテゴリやブランドのものに絞ることができます。オフラインの計算結果とリアルタイムのフィルタリングを組み合わせることができます。

つまり、 [!DNL Target] オフラインで計算されたレコメンデーションや独自に作成したリストに、パーソナライゼーションを追加する場合。 これにより、データサイエンティストのスキルと、配信、ランタイムフィルタリング、A/B テスト、ターゲティング、レポート、統合などのアドビの実証済みの機能を連携させることができます。

カスタム条件にインクルージョンルールを追加することで、静的なレコメンデーションを、訪問者の興味に合わせた動的なレコメンデーションに変えることができます。

* カスタム条件は、レコメンデーションの他の条件と同じように変更可能です。
* 他の条件と同じ方法で、[コレクション](/help/c-recommendations/c-products/collections.md)、[除外](/help/c-recommendations/c-products/exclusions.md)、および[インクルージョン](/help/c-recommendations/c-algorithms/use-dynamic-and-static-inclusion-rules.md)（価格および在庫用の特殊なルールも含む）を使用できます。

主な使用例は次のとおりです。

* 独自に作成したリストのムービーをレコメンデーションしようと考えているが、まだ対象のムービーを視聴していない訪問者のみをターゲットにしたい。
* オフラインアルゴリズムを実行し、結果を使用してレコメンデーションを強化したいが、在庫切れの品目はレコメンデーションされないようにする必要がある。
* 訪問者のお気に入りのカテゴリの品目のみに対象を絞りたい。

## レコメンデーションキー

次のレコメンデーションキーは、 [!UICONTROL レコメンデーションキー] ドロップダウンリスト：

### 現在の品目 {#current-item}

レコメンデーションは、訪問者が現在閲覧中の品目によって決定されます。

レコメンデーションは、指定した品目に興味を示している訪問者が興味を示す可能性のある他の品目を表示します。

このオプションを選択した場合、`entity.id` の値を表示 mbox でパラメーターとして渡す必要があります。

次のアルゴリズムと共に使用できます。

* [!UICONTROL 類似の属性を持つ品目]
* [!UICONTROL これを閲覧した人が他に閲覧したもの]
* [!UICONTROL これを閲覧した人が購入したもの]
* [!UICONTROL これを購入した人が他に購入したもの]

以下を使用： [!UICONTROL 現在の項目] 次のサイトのレコメンデーションキー：

* 商品ページなどの、単一の品目ページ。
* 検索結果が null のページに使用しないでください。

### 最後に購入された品目 {#last-purchased}

レコメンデーションは、各ユニーク訪問者が購入した最後の品目によって決定されます。これは自動的に取り込まれるので、ページに値を渡す必要はありません。

次のアルゴリズムと共に使用できます。

* [!UICONTROL 類似の属性を持つ品目]
* [!UICONTROL これを閲覧した人が他に閲覧したもの]
* [!UICONTROL これを閲覧した人が購入したもの]
* [!UICONTROL これを購入した人が他に購入したもの]

以下を使用： [!UICONTROL 最後に購入された品目] 次のサイトのレコメンデーションキー：

* ホームページ、マイアカウントページ、オフサイト広告。
* 商品ページまたは購入に関連するページには使用しないでください。

#### カスタムレコメンデーションキー

カスタムプロファイル属性の値に基づいてレコメンデーションを設定できます。例えば、訪問者のキューに訪問者自身が最近追加したムービーに基づいて、お勧めのムービーを表示するとしましょう。

1. **[!UICONTROL レコメンデーションキー]**&#x200B;ドロップダウンリストからカスタムプロファイル属性（例：「ウォッチリストに最近追加した番組」）を選択します。
1. 次に、「**[!UICONTROL レコメンデーションロジック]**」を選択します（例：「これを閲覧した人が他に閲覧したもの」）。

   ![新しい条件の作成ダイアログボックス](/help/c-recommendations/c-algorithms/assets/create-new-criteria-1.png)

カスタムプロファイル属性と直接一致するエンティティ ID がない場合は、エンティティとの照合方法を [!DNL Recommendations] に指示する必要があります。例えば、訪問者のお気に入りのブランドからトップセラー商品を表示するとしましょう。

1. **[!UICONTROL レコメンデーションキー]**&#x200B;ドロップダウンリストからカスタムプロファイル属性（例：「お気に入りのブランド」）を選択します。

1. 次に、このキーで使用する「**[!UICONTROL レコメンデーションロジック]**」を選択します（例：「トップセラー」など）。

   「[!UICONTROL 次の一意の値でグループ化]」オプションが表示されます。

1. 選択したキーに一致するエンティティ属性を選択します。この場合は、「お気に入りのブランド」が `entity.brand` に一致します。

   [!DNL Recommendations] では、各ブランドの「トップセラー」リストを生成し、訪問者の「お気に入りのブランド」プロファイル属性に保存されている値に基づいて、適切な「トップセラー」リストを訪問者に表示します。

   ![新しい条件の作成ダイアログボックス 2](/help/c-recommendations/c-algorithms/assets/create-new-criteria-2.png)

### 最後に閲覧された品目 {#last-viewed}

レコメンデーションは、各ユニーク訪問者が閲覧した最後の品目によって決定されます。これは自動的に取り込まれるので、ページに値を渡す必要はありません。

次のアルゴリズムと共に使用できます。

* [!UICONTROL 類似の属性を持つ品目]
* [!UICONTROL これを閲覧した人が他に閲覧したもの]
* [!UICONTROL これを閲覧した人が購入したもの]
* [!UICONTROL これを購入した人が他に購入したもの]

以下を使用： [!UICONTROL 最後に閲覧された品目] 次のサイトのレコメンデーションキー：

* ホームページ、マイアカウントページ、オフサイト広告。
* 商品ページまたは購入に関連するページには使用しないでください。

### 最も多く閲覧された品目 {#most-viewed-logic}

サイトで最も頻繁に閲覧された品目またはメディアを表示します。

このロジックを使用すると、サイトで最も多く閲覧された品目に基づいてレコメンデーションを表示し、他の品目のコンバージョンを増やすことができます。 例えば、最も多く視聴されたビデオに関するレコメンデーションをメディアサイトのホームページに表示して、訪問者に追加のビデオを視聴するよう促すことができます。

このレコメンデーションキーは、次のアルゴリズムと共に使用できます。

* [!UICONTROL 類似の属性を持つ品目]
* [!UICONTROL これを閲覧した人が他に閲覧したもの]
* [!UICONTROL これを閲覧した人が購入したもの]
* [!UICONTROL これを購入した人が他に購入したもの]

### 現在のカテゴリ {#current-category}

レコメンデーションは、訪問者が現在閲覧中の商品カテゴリによって決定されます。

レコメンデーションは、指定した商品カテゴリの品目を表示します。

このオプションを選択した場合、`entity.categoryId` の値を表示 mbox にパラメーターとして渡す必要があります。

このレコメンデーションキーは、次のアルゴリズムと共に使用できます。

* トップセラー
* 最も頻繁に閲覧された

以下を使用： [!UICONTROL 現在のカテゴリ] 次のサイトのレコメンデーションキー：

* 単一のカテゴリページ。
* 検索結果が null のページに使用しないでください。

### お気に入りのカテゴリ {#favorite-category}

レコメンデーションは、訪問者のお気に入りの製品カテゴリによって決定されます。

レコメンデーションは、指定した商品カテゴリの品目を表示します。

このオプションを選択した場合、`entity.categoryId` の値を表示 mbox にパラメーターとして渡す必要があります。

このレコメンデーションキーは、次のアルゴリズムと共に使用できます。

* トップセラー
* 最も頻繁に閲覧された

以下を使用： [!UICONTROL 現在のカテゴリ] 次のサイトのレコメンデーションキー：

* 単一のカテゴリページ。
* 検索結果が null のページに使用しないでください。

### サイトの親和性 {#site-affinity}

品目間の関係の確実性に基づいて品目をレコメンドします。この条件を設定して、レコメンデーションが提示される前に必要となるデータ量をインクルージョンルールスライダーで決定できます。例えば、「非常に強い」を選択すると、適合する確実性が最も強い商品がレコメンデーションされます。

例えば、非常に強い親和性を設定して、デザインに 5 つの品目を含め、そのうちの 3 つが結びつきの強さのしきい値を満たしている場合、強さの最低要件を満たさない 2 つの品目は、レコメンデーションには表示されず、あらかじめ定義された代替品目が代わりに表示されます。最も強い親和性を持つ品目が最初に表示されます。

例えば、あるオンライン小売業者は、過去のセッションで訪問者が興味を示した後続の訪問の品目をレコメンデーションできます。 各訪問者のセッションのアクティビティがキャプチャされ、最新性と頻度モデルに基づいて親和性が計算されます。 この訪問者がサイトに戻ると、サイトの親和性は、サイトでの過去のアクションに基づくレコメンデーションを表示するために使用されます。

多様な商品コレクションや多様なサイト行動のある顧客の場合は、サイトの親和性を弱く設定した方が、最適な結果が得られることがあります。

このロジックは、次のレコメンデーションキーで使用できます。

* 現在の品目
* 最後に購入された品目
* 最後に閲覧された品目
* 最も多く閲覧された品目
