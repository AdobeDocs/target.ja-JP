---
keywords: criteria;algorithm;industry vertical;page type;recommendation key;recommendation logic;logic;data range;behavior data source;partial design;backup recommendations;inclusion rules;attribute weighting;current category;custom attribute;last purchased item;last viewed item;most viewed item;most viewed item;favorite category;popularity;recently viewed item;last purchased;last viewed;most viewed;favorite;recently viewed
description: 条件は、Adobe Recommendations アクティビティの内容を制御します。アクティビティに最適なレコメンデーションを表示するために、条件を作成します。
title: 条件の作成
feature: criteria
translation-type: tm+mt
source-git-commit: 968d36d65016e51290f6bf754f69c91fd8f68405
workflow-type: tm+mt
source-wordcount: '2422'
ht-degree: 66%

---


# ![PREMIUM](/help/assets/premium.png) 条件を作成{#create-criteria}

[!UICONTROL Adobe Target] [!UICONTROL Recommendations]の条件は、[!UICONTROL Recommendations]アクティビティの内容を制御します。 アクティビティに最適なレコメンデーションを表示するために、条件を作成します。これらの条件は、訪問者のアクションを使用して、表示するコンテンツまたは商品を決定します。

次の節では、新しい条件の作成方法について説明します。

## 新しい条件を作成画面にアクセスする

[!UICONTROL 新しい条件を作成]画面を表示するには、複数の方法があります。一部の画面オプションは、画面の表示方法によって異なります。

* **[!UICONTROL Recommendations]**/**[!UICONTROL 条件]**&#x200B;ライブラリ画面で、**[!UICONTROL 条件を作成]**/**[!UICONTROL 条件を作成]**&#x200B;をクリックします。 ここで作成した条件は、自動的にすべての [!DNL Recommendations] アクティビティで利用できるようになります。
* [!UICONTROL Visual Experience Composer](VEC)を使用して[!DNL Recommendations]アクティビティを作成する場合、ページ上の要素を選択し、[!UICONTROL Recommendationsを置き換え]、[!UICONTROL Recommendationsを]の前に挿入、または[!UICONTROL Recommendationsを]の後に挿入します。 次に、使用可能な条件を選択するか、「**[!UICONTROL 条件を作成]**」をクリックします。 新しい条件を作成する場合は、他の[!DNL Recommendations]アクティビティで使用するために条件を保存するオプションがあります。 詳しくは、[Recommendationsアクティビティを作成する](/help/c-recommendations/t-create-recs-activity/create-recs-activity.md)を参照してください。
* [!DNL Recommendations] アクティビティを編集している場合、ページの「 [!UICONTROL レコメンデーションの場所]」ボックスをクリックして、「**[!UICONTROL 条件を変更]**」を選択します。[!UICONTROL 条件を選択]画面で、「**[!UICONTROL 条件を作成]**」をクリックします。 他の [!DNL Recommendations] アクティビティで使用するために新しい条件を保存するオプションがあります。

次の手順は、最初の方法を使用して[!UICONTROL 新しい条件を作成]画面にアクセスすることを前提としています。**[!UICONTROL Recommendations]** > **[!UICONTROL 条件]**&#x200B;ライブラリ画面。

1. **[!UICONTROL Recommendations]**/**[!UICONTROL 条件]**&#x200B;をクリックします。

1. **[!UICONTROL 条件を作成]**/**[!UICONTROL 条件を作成]**&#x200B;をクリックします。

   ![新しい条件の作成](/help/c-recommendations/c-algorithms/assets/CreateNewCriteria_full-new.png)

1. 次のセクションで情報を設定します。

## 基本情報 {#info}

1. 「**[!UICONTROL 条件名]**」を入力します。

   これは、条件の説明に使用される「内部」名です。例えば、条件を「利幅の高い商品」と呼びたいが、正式に表示されるタイトルにはそれを使いたくないという場合があります。公開されるタイトルを設定するには、次の手順を参照してください。

   ![Basic Information」セクションで、以下の手順に従ってください。](/help/c-recommendations/c-algorithms/assets/basic-information.png)

1. この条件を使用するすべての Recommendations 用にページに表示する、公開される「**[!UICONTROL 表示されるタイトル]**」を入力します。

   例えば、この条件を使用してレコメンデーションを表示する際に、「これを表示したひとはこれも表示しています」または「類似の商品」と表示したい場合があります。

1. 条件の簡単な&#x200B;**[!UICONTROL 説明]**&#x200B;を入力します。

   説明は条件の特定に役立ちます。説明には条件の目的に関する情報が含まれる場合があります。

1. レコメンデーションアクティビティの目標に基づいて業種を選択します。

   | 業種 | 目標 |
   |--- |--- |
   | 小売／e コマース | 購入をもたらすコンバージョン |
   | リードジェネレーション／B2B／金融サービス | 購入を伴わないコンバージョン |
   | メディア／投稿 | エンゲージメント |

   その他の条件オプションは、選択した業種によって異なります。

1. **[!UICONTROL ページタイプ]**&#x200B;を選択します。

   複数のページタイプを選択できます。

   業種とページタイプをともに使用して、保存した条件を分類し、他の [!DNL Recommendations] アクティビティで簡単に再利用できるようにします。

1. 「**[!UICONTROL レコメンデーションキー]**」を選択します。

   キーに基づく条件の設定について詳しくは、[レコメンデーションキーに基づくレコメンデーションの設定](/help/c-recommendations/c-algorithms/base-the-recommendation-on-a-recommendation-key.md)を参照してください。

1. 「**[!UICONTROL レコメンデーションロジック]**」を選択します。

   レコメンデーションロジックのオプションについて詳しくは、[条件](/help/c-recommendations/c-algorithms/algorithms.md)を参照してください。

   >[!NOTE]
   >
   >「**[!UICONTROL 項目]**/ **[!UICONTROL 類似の属性を持つメディア]**」を選択すると、[コンテンツの類似性ルール](#similarity)を設定できます。

## Data Source {#data-source}

1. 「**[!UICONTROL データ範囲]** 」を設定して、表示するレコメンデーションを決定する際に使用するユーザーの行動履歴データの範囲を決定します。

   ![データ範囲スライダ](/help/c-recommendations/c-algorithms/assets/data-range.png)

   サイトのトラフィックが多く、行動が頻繁に変わる場合は、データの範囲を狭めます。[!DNL Recommendations] は、範囲を狭くするほどマーケットやビジネスの変化に反応しやすくなります。例えば、範囲を狭く設定した場合、訪問者が新学期やクリスマスなどの季節の製品の購入を始めると、[!DNL Recommendations] は訪問者の行動の変化を検知して季節に適した品目をレコメンデーションするようになります。

   データ量が多くない場合や、訪問者の行動が頻繁に変化しない場合は、範囲を長くすることもできます。ただし、多くのサイトでは、範囲を短くすることによってレコメンデーションが向上しています。

   有効なデータ範囲は、次のとおりです。

   * 2 日
   * 1 週間
   * 2 週間
   * 1 か月
   * 2 か月

1. （条件付き）目的の&#x200B;**[!UICONTROL 行動データソース]**&#x200B;を選択します。[!UICONTROL mboxs]または[!UICONTROL Analytics]。

   >[!NOTE]
   >
   >[!UICONTROL 行動データソース]セクションは、導入で[ターゲット](/help/c-integrating-target-with-mac/a4t/a4t.md)(A4T)に対してAnalyticsを使用している場合にのみ表示されます。

   ![「行動データソース」セクション](/help/c-recommendations/c-algorithms/assets/behavioural-data-source.png)

   「[!UICONTROL Analytics]」を選択した場合、目的のレポートスイートを選択します。

   条件が行動データソースとして[!DNL Adobe Analytics]を使用している場合、使用可能な条件は、以下に説明するように、選択したレポートスイートとルックバックウィンドウが他の条件に使用されたかどうかによって異なります。

   * **1 回限りのレポートスイート設定**：指定されたデータ範囲のルックバックウィンドウで最初にレポートスイートが使用されると、[!DNL Target Recommendations] は、選択されたレポートスイートの行動データを [!DNL Analytics] から完全にダウンロードするまで 2 ～ 7 日間かかる可能性があります。この時間枠は、[!DNL Analytics]システムの負荷に依存します。
   * **新しい条件または既に使用可能なレポートスイートを使用して編集した条件**：新しい条件を作成したり既存の条件を編集したりする場合、選択されたレポートスイートが選択されたデータ範囲以下のデータ範囲で既に [!DNL Target Recommendations] で使用されていれば、データは即座に使用でき、1 回限りの設定は必要ありません。この場合、または選択されたレポートスイートまたはデータ範囲が変更されずにアルゴリズムの設定が編集されると、12 時間以内にアルゴリズムが実行または再実行されます。
   * **進行中のアルゴリズム実行**：毎日の [!DNL Analytics] から [!DNL Target Recommendations] へのデータフロー。例えば、[!UICONTROL 表示の親和性]レコメンデーションの場合、ユーザーが製品を表示すると、製品表示トラッキングコールがほぼリアルタイムで [!DNL Analytics] に渡されます。[!DNL Analytics] データが翌日早くに [!DNL Target] にプッシュされ、[!DNL Target] が 12 時間以内にアルゴリズムを実行します。

   詳しくは、[Adobe AnalyticsとターゲットRecommendations](/help/c-recommendations/c-algorithms/use-adobe-analytics-with-recommendations.md)の使用を参照してください。

## コンテンツ {#content}

コンテンツルールは、レコメンデーション品目の数が[レコメンデーションデザイン](/help/c-recommendations/c-design-overview/design-overview.md)を満たさない場合の動作を決定します。 [!DNL Recommendations] の条件によって、デザインが呼び出すよりも少ないレコメンデーションを返すことがあります。例えば、デザインに4つの品目用のスロットがあり、条件によって2つの品目のみがレコメンデーションされる場合、残りのスロットを空のままにするか、代替レコメンデーションを使用して追加のスロットを埋めることができます。

![コンテンツセクション](/help/c-recommendations/c-algorithms/assets/content.png)

1. （オプション）「**[!UICONTROL デザインの部分レンダリング]**」を「オン」の位置にスライドさせます。

   塗りつぶされるスロットはできるだけ多くありますが、デザインテンプレートに残りのスロット用の空白スペースが含まれる場合があります。 このオプションを無効にした場合、使用可能なすべてのスロットを満たすのに十分なコンテンツがないと、recommendationsは提供されず、代わりにデフォルトコンテンツが表示されます。

   空白のスロットでレコメンデーションを提供する場合は、このオプションを有効にします。 次の手順で説明するように、サイトの類似したコンテンツまたは人気のあるコンテンツで埋められた空のスロットに条件に基づいてレコメンデーションスロットにコンテンツを挿入する場合は、代替レコメンデーションを使用します。

1. （オプション）**[!UICONTROL 「バックアップRecommendationsを表示]**」を「オン」の位置に切り替えます。

   デザインの残りの空のスロットに、サイト全体から最も多く閲覧された製品をランダムに選択して入力します。

   代替レコメンデーションを使用すると、レコメンデーションデザインで使用可能なスロットがすべて埋まるようになります。 次の図に示すように、4 x 1のデザインがあるとします。

   ![4 x 1デザイン](/help/c-recommendations/c-design-overview/assets/velocity_example.png)

   条件によって2つの品目のみがレコメンデーションされるとします。 [!UICONTROL デザインの部分レンダリング]オプションを有効にした場合、最初の2つのスロットは満たされますが、残りの2つのスロットは空のままです。 ただし、「[!UICONTROL バックアップRecommendationsを表示]」オプションを有効にした場合、指定した条件に基づいて最初の2つのスロットが埋められ、残りの2つのスロットは代替レコメンデーションに基づいて埋められます。

   次のマトリックスは、[!UICONTROL デザインの部分レンダリング]と[!UICONTROL Recommendationsのバックアップ]オプションを使用する場合に確認できる結果を示しています。

   | デザインの部分レンダリング | 代替レコメンデーション | 結果 |
   |--- |--- |--- |
   | 無効 | 無効 | 返されたレコメンデーションがデザインで指定されているよりも少ない場合、レコメンデーションデザインはデフォルトコンテンツに置き換えられ、レコメンデーションは表示されません。 |
   | 有効 | 無効 | デザインはレンダリングされますが、返されたレコメンデーションがデザインで指定されているよりも少ない場合、空白スペースが含まれることがあります。 |
   | 有効 | 有効 | 使用可能なデザインの「スロット」に代替レコメンデーションが挿入され、デザインが完全にレンダリングされます。<br>インクルージョンルールを代替レコメンデーションに適用するとデザインに挿入できなくなるほど適格な代替レコメンデーションの数が制限される場合、デザインは部分的にレンダリングされます。<br>この基準がレコメンデーションを返さず、インクルージョンルールが代替レコメンデーションをゼロに制限する場合、デザインはデフォルトコンテンツで置き換えられます。 |
   | 無効 | 有効 | 使用可能なデザインの「スロット」に代替レコメンデーションが挿入され、デザインが完全にレンダリングされます。<br>インクルージョンルールを代替レコメンデーションに適用するとデザインに挿入できなくなるほど適格な代替レコメンデーションの数が制限される場合、デザインはデフォルトコンテンツに置き換えられ、レコメンデーションは表示されません。 |

   詳しくは、[代替レコメンデーションの使用](/help/c-recommendations/c-algorithms/backup-recs.md)を参照してください。

1. （条件付き）前の手順で「**[!UICONTROL バックアップRecommendationsを表示]**」を選択した場合は、「**[!UICONTROL 代替レコメンデーションにインクルージョンルールを適用]**」を有効にできます。

   インクルージョンルールは、レコメンデーションに含める品目を決定します。 使用できるオプションは、業種によって異なります。

   詳しくは、以下の[インクルージョンルールの指定](#inclusion)を参照してください。

1. （オプション）「以前購入したことを推奨する品目&#x200B;]**」を「オン」位置に切り替えるように**[!UICONTROL &#x200B;スライドします。

   この設定は、`productPurchasedId` に基づいています。デフォルトの動作では、以前に購入された品目はレコメンドされません。ほとんどの場合、顧客が最近購入した品目を再び推奨することは望ましくありません。カヤックなど、通常 1 回しか購入しない品目を販売する場合に便利です。シャンプーや他の個人用品など、繰り返し購入に戻る品目を販売する場合は、このオプションを有効にする必要があります。

## コンテンツの類似性 {#similarity}

[!UICONTROL コンテンツの類似性ルール]を使い、品目またはメディアの属性に基づいたレコメンデーションをおこないます。

>[!NOTE]
>
>**[!UICONTROL 類似の属性を持つメディア]**&#x200B;を[レコメンデーションロジック](#info)として「&lt;a0/>項目&#x200B;]**/**[!UICONTROL 」を選択した場合は、コンテンツの類似性ルールを設定するオプションがあります。

コンテンツの類似性では、アイテム属性キーワードを比較し、複数の項目に共通するキーワードの数に基づいてレコメンデーションを作成します。コンテンツの類似性に基づくレコメンデーションでは、過去のデータがなくても質の高い結果が得られます。

コンテンツの類似性によるレコメンデーションの生成は、新しい項目について特に有効です。新しい項目は過去の動作に基づく「*○○を表示した人*」などのロジックを使用したレコメンデーションでは通常は表示されません。また、コンテンツの類似性を使用すると、過去の購入などの履歴データがない新規訪問者に対する便利なレコメンデーションを生成することもできます。

**[!UICONTROL 項目]**／**[!UICONTROL 類似属性のメディア]**&#x200B;を選択すると、レコメンデーションを決定する際の特定の項目属性の重要度を増減させるルールを作成できます。本などの項目については、*ジャンル*、*著者*、*シリーズ*&#x200B;などの属性の重要度を高くして、類似する本を推奨することができます。

![](assets/ContentSimilarity.png)

コンテンツの類似性ではキーワードを使用して項目を比較しているため、*メッセージ*&#x200B;や&#x200B;*説明*&#x200B;などの一部の属性により比較に「邪魔」が入ることがあります。このような属性については、ルールを作成して無視することができます。

デフォルトでは、すべての属性は「*ベースライン*」に設定されています。この設定を変更しない場合、ルールを作成する必要はありません。

>[!NOTE]
>
>コンテンツの類似性アルゴリズムは、項目間の類似性を計算する際にランダムサンプリングを使用する場合があります。 その結果、項目間の類似性評価は、アルゴリズムの実行間で異なる場合があります。

## インクルージョンルール {#inclusion}

いくつかのオプションを使用して、レコメンデーションに表示する品目を絞り込むことができます。条件やプロモーションの作成時にインクルージョンルールを使用できます。

![インクルージョンルール](/help/c-recommendations/c-algorithms/assets/inclusion-rules.png)

インクルージョンルールはオプションです。ただし、これらの詳細を設定すると、レコメンデーションに表示される項目をさらに制御できるようになります。詳細を設定するたびに、表示基準をより詳細に絞り込むことができます。

例えば、在庫数が 50 を超えていて、価格が $25～$45 の婦人靴だけを表示するよう選択できます。また、ビジネス上非常に重要な品目が最も表示されやすくなるように各属性に対して重みを付けることもできます。

別の例として、サイトにアクセスした訪問者のうち、特定の都市にいて、特定の学位を取得している訪問者に求人情報を表示できます。

インクルージョンルールのオプションは、業種によって異なります。デフォルトでは、インクルージョンルールは代替レコメンデーションに適用されます。

>[!IMPORTANT]
>
>インクルージョンルールは使用する際に注意が必要です。例えば、会社で、あるブランドが表示されているときに別のブランドをレコメンデーションしないというルールがある場合に、このフィルターは便利です。ただし、この機能には機会費用が伴う場合があります。アクティビティ条件によって通常表示されると考えられる一部の品目を、表示しないように制限することで、上昇率が減少する可能性があります。

インクルージョンルールは、AND で結合されます。品目がレコメンデーションに含まれるためには、すべてのルールを満たす必要があります。

上述の例のように、在庫数が 50 を超えていて、価格が $25～$45 の婦人靴だけを表示するシンプルなインクルージョンルールは、次の手順で作成できます。

1. レコメンデーションする商品の価格帯を設定します。
1. レコメンデーションする商品の最小在庫数を設定します。
1. 特定の基準を満たす場合のみ品目を表示するよう、レコメンデーションを設定します。

   ![](assets/Recs_InclusionRules.png)

   一覧にある属性のいずれかが、1 つまたは複数の指定の条件を満たす、あるいは満たさない場合のみ、品目を含めるよう指定できます。

   使用できる評価演算子は、最初のドロップダウンで選択する値によって異なります。複数の品目を指定することができます。この品目は、OR で評価されます。

   複数のルールは、AND で結合できます。

   >[!NOTE]
   >
   >このオプションは、レコメンデーションに表示される品目を限定します。そのレコメンデーションがどのページに表示されるかには影響しません。レコメンデーションを表示する場所を制限するには、Experience Composer でページを選択します。

詳しくは、[動的および静的インクルージョンルールの使用](/help/c-recommendations/c-algorithms/use-dynamic-and-static-inclusion-rules.md)を参照してください。

## 属性の重み付け {#weighting}

複数のルールを追加して、コンテンツカタログに関する重要な情報やメタデータに基づいてアルゴリズムを「一押し」できるので、特定の項目が表示されやすくなります。

例えば、セール品に対してより大きな重み付けを適用して、より頻繁にレコメンデーションに表示されるようにできます。その結果、非セール品は完全に除外されませんが、表示される頻度は低くなります。複数の重み付け属性を同じアルゴリズムに適用することができ、レコメンデーションの分割したトラフィックについて重み付け属性をテストできます。

1. 値を選択します。

   この値は、利用可能な条件のいずれかに基づいて、より表示される可能性の高くなる品目のタイプを決定します。

1. 評価基準を選択します。

1. キーワードを入力して、ルール属性を完成させます。

   例えば、完全なルールは、「カテゴリにサブ文字列「靴を含む」などです。

   ![](assets/Recs_AttributeWeighting.png)

1. ルールに割り当てる重みを選択します。

   オプションの範囲は 0 ～ 100（25 単位の増分）です。

1. 必要に応じて、その他のルールを追加します。

終了したら「**[!UICONTROL 保存]**」をクリックします。

新しい [!UICONTROL Recommendations] アクティビティを作成したり、既存のものを編集したりする場合、「**[!UICONTROL 後で使用するために条件を保存]**」チェックボックスがデフォルトで選択されています。他のアクティビティで条件を使用したくない場合、保存する前にチェックボックスをオフにします。

## トレーニングビデオ：Recommendationsで条件を作成(12:33) ![チュートリアルバッジ](/help/assets/tutorial.png)

このビデオには、次の情報が含まれています。

* 条件の作成
* 条件のシーケンスの作成
* カスタム条件のアップロード

>[!VIDEO](https://video.tv.adobe.com/v/27694?quality=12)
