---
description: 条件とプロモーションのインクルージョンルールを作成する方法と、動的フィルタールールまたは静的フィルタールールを追加して成果を高める方法について説明します。
keywords: インクルージョンルール;包含条件;レコメンデーション;新しい条件の作成;プロモーション;動的フィルター;動的;空の値;フィルタールールの無視;静的フィルター;値でフィルター;エンティティ属性のマッチング;プロファイル属性のマッチング;パラメーターのマッチング;値でフィルター;静的フィルター
seo-description: Adobe Target Recommendationsでの条件とプロモーションのインクルージョンルールの作成、より良い結果を得るための動的または静的フィルタールールの追加に関する情報です。
seo-title: Adobe Target Recommendationsでの動的および静的インクルージョンルールの使用
solution: 'Target '
title: 動的および静的インクルージョンルールの使用
title-outputclass: premium
topic: Premium
uuid: f0ee2086-1126-44a4-9379-aa897dc0e06b
badge: premium
translation-type: tm+mt
source-git-commit: 5ab3258eda4363072b7cec1d4b5284f1d5638472

---


# ![PREMIUM](/help/assets/premium.png) 動的および静的インクルージョンルールの使用{#use-dynamic-and-static-inclusion-rules}

条件とプロモーションのインクルージョンルールを作成する方法と、動的フィルタールールまたは静的フィルタールールを追加して成果を高める方法について説明します。

条件とプロモーションでは、インクルージョンルールを作成、使用する方法は類似しています。使用例やサンプルも同様です。このトピックでは、条件およびプロモーションと、インクルージョンルールの使い方について説明します。

## フィルタールールを条件に追加する {#section_CD0D74B8D3BE4A75A78C36CF24A8C57F}

[条件の作成](../../c-recommendations/c-algorithms/create-new-algorithm.md#task_8A9CB465F28D44899F69F38AD27352FE)時に、**[!UICONTROL インクルージョンルール]**&#x200B;の「**[!UICONTROL フィルタールールを追加]**」をクリックします。 

![](assets/inclusion_options.png)

利用できるオプションは、選択した業種とレコメンデーションキーによって変わります。

## フィルタールールをプロモーションに追加する {#section_D59AFB62E2EE423086281CF5D18B1076}

[プロモーションの作成](../../c-recommendations/t-create-recs-activity/adding-promotions.md#task_CC5BD28C364742218C1ACAF0D45E0E14)時に、「**[!UICONTROL 属性別にプロモート]**」、「**[!UICONTROL フィルタールールを追加]**」の順にクリックします。

![](assets/inclusion_options_promotion.png)

## フィルターのタイプ {#section_0125F1ED10A84C0EB45325122460EBCD}

次の表には、条件とプロモーションで利用できるフィルターオプションのタイプがまとめられています。

| タイプ | オプション | 利用できる演算子 |
|--- |--- |--- |
| **動的フィルター** | **エンティティ属性のマッチング：**&#x200B;レコメンデーション品目の候補のプールと、ユーザーが閲覧した特定の品目を比較することで、動的にフィルタリングします。<br>例えば、現在の品目のブランドと一致する品目のみをレコメンデーションできます。 | 次と等しい<br>次と等しくない<br>次の間である<br>次を含む<br>次を含まない<br>次の語句で始まる<br>次の語句で終わる<br>値が存在する<br>値が存在しない<br>次よりも大きいか等しい<br>次よりも小さいか等しい |
|  | **プロファイル属性のマッチング：**&#x200B;品目（エンティティ）とユーザーのプロファイルの値を比較することで、動的にフィルタリングします。<br>例えば、訪問者が好きなブランドと一致する品目のみをレコメンデーションできます。 | 次と等しい<br>次と等しくない<br>次を含む<br>次を含まない<br>次の語句で始まる<br>次の語句で終わる<br>次よりも大きいか等しい <br>次よりも小さいか等しい<br>次の間である |
|  | **パラメーターのマッチング：**&#x200B;品目（エンティティ）とリクエスト（API または mbox）の値を比較することで、動的にフィルタリングします。<br>例えば、「業種」ページパラメーターに一致するコンテンツのみをレコメンデーションできます。<br>**重要：** 2016 年 11 月 1 日以前に作成されたアクティビティの場合、「パラメーターのマッチング」フィルターを使用すると配信に失敗します。この問題を回避する方法は次のとおりです。<ul><li>新しいアクティビティを作成し、条件を追加します。</li><li>「パラメーターのマッチング」フィルターを含まない条件を使用します。</li><li>条件から「パラメーターのマッチング」フィルターを削除します。</li></ul> | 次と等しい<br>次と等しくない<br>次を含む<br>次を含まない<br>次の語句で始まる<br>次の語句で終わる<br>次よりも大きいか等しい<br>次よりも小さいか等しい<br>次の間である |
| **値でフィルター** | **静的フィルター：**&#x200B;フィルターに使用する静的な値を入力します（複数可）。<br>例えば、MPAA レーティングが「G」または「PG」のコンテンツのみをレコメンデーションできます。 | 次と等しい<br>次と等しくない<br>次を含む<br>次を含まない<br>次の語句で始まる<br>次の語句で終わる<br>値が存在する<br>値が存在しない<br>次よりも大きいか等しい<br>次よりも小さいか等しい |

>[!NOTE]
>
>Target 17.6.1 リリース（2017 年 6 月）以前におけるインクルージョンルールの設定方法に慣れている場合は、一部のオプションや演算子が変わっていることに気付くかもしれません。選択したオプションに適用できる演算子のみが表示されるようになり、いくつかの演算子は、よりわかりやすく一貫性のある名前に変更されています（「一致」が「次に等しい」になるなど）。このリリース以前に作成された既存の除外ルールは、新しい方式に自動的に移行されているので、手動で再設定をおこなう必要はありません。

インクルージョンルールは必要に応じて無制限に作成できます。インクルージョンルールは AND 演算子で結合します。品目がレコメンデーションに含まれるためには、すべてのルールを満たす必要があります。

動的条件と動的プロモーションは、静的条件と静的プロモーションよりもかなり効果的で、成果やエンゲージメントを高めることができます。マーケティング活動で動的プロモーションを使用する際に、参考になる例を次に示します。

**次に等しい：**&#x200B;動的プロモーションで「次に等しい」演算子を使用すると、訪問者が Web サイトで品目（商品、記事、映画など）を閲覧しているときに、以下のような条件に該当する他の品目をプロモーションできます。

* 同じブランド
* 同じカテゴリ
* 同じカテゴリの自社ブランド
* 同じ店舗

**等しくない：**&#x200B;動的プロモーションで「等しくない」演算子を使用すると、訪問者が Web サイトで品目（商品、記事、映画など）を閲覧しているときに、以下のような条件に該当する他の品目をプロモーションできます。

* 別の TV シリーズ
* 別のジャンル
* 別の商品シリーズ
* 別のスタイル ID

**範囲内：**&#x200B;動的プロモーションで「範囲内」演算子を使用すると、訪問者が Web サイトで品目（商品、記事、映画など）を閲覧しているときに、以下のような条件に該当する他の品目をプロモーションできます。

* より高価格
* より低価格
* 価格がプラスマイナス 30％
* 同じシーズンの後続のエピソード
* シリーズの前巻

## エンティティ属性のマッチング、プロファイル属性のマッチング、パラメーターのマッチングでフィルタリングする際に空の値を処理する {#section_7D30E04116DB47BEA6FF840A3424A4C8}

終了条件またはプロモーションでエンティティ属性のマッチング、プロファイル属性のマッチング、パラメーターのマッチングによってフィルタリングしたときに、値が空だった場合は、複数の方法で処理することができます。

以前は、値が空の場合は何も結果が返されませんでした。次の図のように、「*x* が空の場合」ドロップダウンリストを使用することで、条件に空の値があった場合に実行する処理を選択できます。

![](assets/empty_value.png)

処理を選択するには、歯車アイコン（![](assets/icon_gear.png)）にマウスポインターを置いてから、目的の処理を選択します。

| アクション | 利用できるマッチング | 詳細 |
|--- |--- |--- |
| このフィルタールールを無視 | プロファイル属性のマッチング<br>パラメーターのマッチング | プロファイル属性のマッチングとパラメーターのマッチングのデフォルトの処理です。<br>このオプションではルールを無視するよう指定します。例えば、3 つのフィルタールールがあり、3 つ目のルールでは何も値が返されなかった場合は、何も結果を返さないのではなく、値が空だった 3 つ目のルールのみを無視できます。 |
| この条件の結果を表示しない | エンティティ属性のマッチング<br>プロファイル属性のマッチング<br>パラメーターのマッチング | エンティティ属性のマッチングのデフォルトの処理です。<br>Target にこのオプションが追加される前の処理方法です。この条件の結果を表示しません。 |
| 静的値を使用 | エンティティ属性のマッチング<br>プロファイル属性のマッチング<br>パラメーターのマッチング | 値が空だった場合に静的値を使用するよう設定できます。 |

## プロファイル属性の一致の例 {#section_9873E2F22E094E479569D05AD5BB1D40}

[!UICONTROL プロファイル属性の一致] (Profile Attribute Matching)を使用すると、以下の例のように、訪問者のプロファイルの属性に一致する品目のみをレコメンデーションできます。

**例1:ユーザーのお気に入りブランドの品目のレコメンデーション**&#x200B;例えば、「プロファイル属性の一致」オプションを使用して、ブランドが値やテキストと等しい場合にのみ品目をレコメンドするルールを作成できま `profile.favoritebrand`す。 このようなルールでは、ある訪問者が特定のブランドのランニングショーツを閲覧している場合は、その訪問者のお気に入りのブランド（その訪問者のプロファイルの `profile.favoritebrand` に保存されている値）と一致する品目のみがレコメンデーションされます。

```
Profile Attribute Matching
brand - equals - the value/text stored in - profile.favoritebrand
```

**例2:求職者とのジョブの一致**&#x200B;求職者とのジョブの一致を試みているとします。 求職者と同じ都市にあるジョブのみをレコメンデーションする場合。

次の例のように、インクルージョンルールを使用して、訪問者のプロファイルからジョブリストにある求職者の場所を一致させることができます。

```
Profile Attribute Matching
jobCity - equals - the value/text stored in - profile.usersCity
```

## エンティティ属性の一致の例

[!UICONTROL エンティティ属性一致] (Entity Attribute Matching)を使用すると、以下の例のように、ユーザーが現在閲覧中の品目、ユーザーが最近閲覧した品目、最も購入した品目、訪問者プロファイルのカスタム属性に保存された品目の属性に一致する品目のみをレコメンデーションできます。

**例3:より高価な商品へのアップセル**&#x200B;自分がアパレル小売業者で、ユーザーに高価格で利益率の高い商品の検討を促したいとします。 「等しい」演算子と「次の値と値の範囲内」演算子を使用して、同じカテゴリと同じブランドのより高価な品目をプロモーションできます。 例えば、ランニングカンパニーを訪問する訪問者は、ランニングシューズを見ている訪問者を高額で販売する目的で、より高価なランニングシューズをプロモーションできます。

```
Entity Attribute Matching
category - equals - current item's - category 
And 
Entity Attribute Matching
brand - equals - current item's - brand 
And 
Entity Attribute Matching
value - is between - 100% and 1000% of - current item's - value
```

**例4:プライベートラベル製品のプロモーション**&#x200B;動的フィルターと静的フィルターを組み合わせて、プライベートラベル製品をプロモーションすることができます。 例えば、オフィスサプライ会社は、会社の住宅ブランドのトナーカートリッジを促進して、トナーを見る訪問者にとってより有益な売り上げをもたらし、社内ブランドのペンを促進して、ペンを見る訪問者にとってより有益な売り上げをもたらします。

```
Entity Attribute Matching
category - equals - current item's - category 
And
Static Filter
IsHouseBrand - equals - true
```

## 注意事項 {#section_A889FAF794B7458CA074DEE06DD0E345}

>[!IMPORTANT]
>
>データタイプが異なる属性に対して「次に等しい」および「等しくない」演算子を使用した動的な条件またはプロモーションでは、実行時に互換性がない可能性があります。左側に事前定義された属性またはカスタム属性がある場合、右側で値、利益、在庫および環境の値を賢く使用する必要があります。

![](assets/left_right.png)

以下の表に、効果的なルールと実行時に互換性のない可能性のあるルールを示します。

| 互換性のあるルール | 互換性のない可能性のあるルール |
|--- |--- |
| value - is between - 90% and 110% of current item's - salesValue | salesValue - is between - 90% and 110% of current item's - value |
| value - is between - 90% and 110% of current item's - value | clearancePrice - is between - 90% and 110% of current item's - margin |
| margin - is between - 90% and 110% of current item's - margin | storeInventory - equals - current item's - inventory |
| inventory - equals - current item's - inventory |  |
