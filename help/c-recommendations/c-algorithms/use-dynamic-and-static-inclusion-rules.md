---
keywords: インクルージョンルール;包含条件;レコメンデーション;新しい条件の作成;プロモーション;動的フィルター;動的;空の値;フィルタールールの無視;静的フィルター;値でフィルター;エンティティ属性のマッチング;プロファイル属性のマッチング;パラメーターのマッチング;値でフィルター;静的フィルター
description: Adobe TargetRecommendationsで条件とプロモーション用のインクルージョンルールを作成する方法を説明します。 より良い結果を得るには、より多くの動的または静的フィルタールールを追加します。
title: Recommendationsで動的および静的包含ルールを使用する方法を教えてください。
feature: Recommendations
mini-toc-levels: 3
exl-id: 49b20e75-ee55-4239-94a0-6d175e2d4811
translation-type: tm+mt
source-git-commit: 43a7d3b3056a4404d18aa4a05a7a93d695900f73
workflow-type: tm+mt
source-wordcount: '2087'
ht-degree: 17%

---

# ![PREMIUM](/help/assets/premium.png) 動的および静的インクルージョンルールの使用

[!DNL Adobe Target]で条件およびプロモーションのインクルージョンルールを作成し、レコメンデーションの結果を高めるために動的または静的フィルタールールを追加する方法について説明します。

条件とプロモーションでは、インクルージョンルールを作成、使用する方法は類似しています。使用例やサンプルも同様です。この節では、条件とプロモーション、およびインクルージョンルールの使用について説明します。

## フィルタールールを条件に追加する {#section_CD0D74B8D3BE4A75A78C36CF24A8C57F}

[条件の作成](/help/c-recommendations/c-algorithms/create-new-algorithm.md#task_8A9CB465F28D44899F69F38AD27352FE)時に、**[!UICONTROL インクルージョンルール]**&#x200B;の「**[!UICONTROL フィルタールールを追加]**」をクリックします。 

![](assets/inclusion_options_new.png)

利用できるオプションは、選択した業種とレコメンデーションキーによって変わります。

## フィルタールールをプロモーションに追加する {#section_D59AFB62E2EE423086281CF5D18B1076}

[プロモーションの作成](/help/c-recommendations/t-create-recs-activity/adding-promotions.md#task_CC5BD28C364742218C1ACAF0D45E0E14)時に、「**[!UICONTROL 属性別にプロモート]**」、「**[!UICONTROL フィルタールールを追加]**」の順にクリックします。

![](assets/inclusion_options.png)

## フィルターのタイプ {#section_0125F1ED10A84C0EB45325122460EBCD}

次の節では、条件とプロモーションの両方に対して、[!UICONTROL 動的フィルター]および[!UICONTROL 値]でフィルターするフィルターオプションのタイプをリストします。

### 動的フィルター

動的インクルージョンルールは静的インクルージョンルールよりも強力で、より優れた結果とエンゲージメントをもたらします。 次の点に留意してください。

* 動的なインクルージョンルールは、ユーザーのプロファイルパラメーターまたはmbox呼び出し内の属性を一致させることで、レコメンデーションを配信します。

   例えば、「最頻使用条件」レコメンデーションを作成できます。 返されるレコメンデーションのセットから、レコメンデーションが表示されるページにユーザーがアクセスしたときに渡される属性に対して、任意のレコメンデーションを（リアルタイムで）フィルターで除外できます。

* 静的ルールを使用して、（コレクションを使用する代わりに）レコメンデーションに含める品目を制限します。

* 必要な数の動的インクルージョンルールを作成できます。 インクルージョンルールは AND 演算子で結合します。品目がレコメンデーションに含まれるためには、すべてのルールを満たす必要があります。

動的フィルタリングには、次のオプションを使用できます。

| 動的フィルタリングオプション | 詳細 |
| --- | --- |
| [エンティティ属性のマッチング](/help/c-recommendations/c-algorithms/entity-attribute-matching.md) | 推定品目のプールを、ユーザーが操作を行った特定の品目と比較して、動的にフィルタリングします。<br>訪問者のお気に入りのブランドなど、訪問者にアピールする可能性が最も高いレコメンデーションを表示する場合に、 [!UICONTROL エンティティ属性] の一致を使用します。 |
| [プロファイル属性のマッチング](/help/c-recommendations/c-algorithms/profile-attribute-matching.md) | 項目（エンティティ）をユーザーのプロファイルー内の値と比較して、動的にフィルタリングします。<br>サイズやお気に入りのブランドなど、訪問者のプロファイルに保存されている値に一致するレコメンデーションを表示する場合は、 [!UICONTROL プロファイル属性] の一致を使用します。 |
| [パラメーターのマッチング](/help/c-recommendations/c-algorithms/parameter-matching.md) | 項目（エンティティ）とリクエスト（APIまたはmbox）内の値を比較して、動的にフィルターします。<br>「 [!UICONTROL パラメーターの] 一致」を使用して、ページのパラメーターまたは訪問者のパラメーター（デバイスのサイズや地域など）に一致するコンテンツを推奨します。 |

### 値でフィルター

次のオプションは、値によるフィルタリングに使用できます。

| 値によるフィルタリングオプション | 詳細 |
| --- | --- |
| [静的フィルター](/help/c-recommendations/c-algorithms/static-value.md) | フィルタリングする1つ以上の静的な値を手動で入力します。 |

## 使用可能な演算子{#operators}

動的な条件とプロモーションは静的な条件やプロモーションよりもはるかに強力で、より良い結果とエンゲージメントをもたらします。

次の例は、マーケティング活動で動的なプロモーションと除外をどのように使用できるかに関する一般的なアイデアを提供します。

| 演算子 | 例 |
| --- | --- |
| Equals<br>(エンティティ属性の一致、プロファイル属性の一致、パラメーターの一致、静的フィルターで使用可能) | 動的プロモーションで「等しい」演算子を使用すると、訪問者がWebサイト上のアイテム（製品、記事、映画など）を表示している場合に、次のアイテムの他のアイテムをプロモーションできます。<ul><li>同じブランド</li><li>同じカテゴリ</li><li>同じカテゴリAND社ブランド</li><li>同じ店</li></ul> |
| Does Not Equal<br>(エンティティ属性の一致、プロファイル属性の一致、パラメーターの一致および静的フィルターで使用可能) | 動的プロモーションで「等しくない」演算子を使用すると、訪問者がWebサイト上のアイテム（製品、記事、映画など）を表示している場合に、次のアイテムの他のアイテムをプロモーションできます。<ul><li>別のテレビシリーズ</li><li>別のジャンル</li><li>別の製品シリーズ</li><li>別のスタイルID</li></ul> |
| Does Not Contain Substring<br>(エンティティ属性の一致、プロファイル属性の一致、パラメーターの一致および静的フィルターで使用可能) | 訪問者がWebサイト上のアイテム（製品など）を表示しているときに、「does not contain substring」演算子を使用して、次のような他のアイテムをプロモーションできます。<ul><li>タイトルに誓う単語は含まれません</li></ul> |
| <br>を持つ開始(エンティティ属性の一致、プロファイル属性の一致、パラメーターの一致、静的フィルターで使用可能) | 「開始と」演算子を使用して、訪問者がWebサイト上のアイテム（製品など）を表示している場合、次のような他のアイテムをプロモーションできます。<ul><li>iPhoneでの製品名開始</li></ul> |
| <br>で終わる(エンティティ属性の一致、プロファイル属性の一致、パラメーターの一致、静的フィルターで使用可能) | 「次の語句で終わる」演算子を使用して、訪問者がWebサイト上の項目（製品など）を表示している場合、次のようなその他の項目をプロモーションできます。<ul><li>コンテンツはENで終わり、英語を示します。</li></ul> |
| が<br>以上(エンティティ属性の一致、プロファイル属性の一致、パラメーターの一致および静的フィルターで使用可能) | 「次よりも大きいか等しい」演算子を使用して、訪問者がWebサイト上のアイテム（製品など）を表示している場合、次のような他のアイテムをプロモーションできます。<ul><li>コストが同じか、より高い</li></ul> |
| が<br>以下である(エンティティ属性の一致、プロファイル属性の一致、パラメーターの一致および静的フィルターで使用可能)。 | 「次よりも小さいか等しい」演算子を使用して、訪問者がWebサイト上のアイテム（製品など）を表示している場合、次のような他のアイテムをプロモーションできます。<ul><li>コストは同じか低い</li><li>コストの低い項目の除外</li></ul> |
| Is Between<br>(エンティティ属性の一致、プロファイル属性の一致、パラメーターの一致で使用可能) | 動的プロモーションで「次の範囲内」演算子を使用すると、訪問者がWebサイト上のアイテム（製品、記事、映画など）を表示している場合に、次のような他のアイテムをプロモーションできます。<ul><li>より高価</li><li>低価格</li><li>コストプラスマイナス30%</li><li>同時期の後期</li><li>シリーズ内の事前帳簿</li></ul> |
| リスト<br>に含まれる(プロファイル属性の一致とパラメータの一致で使用可能)。 | プロファイル属性の一致で「リストに含まれる」演算子を使用して、訪問者がWebサイト上のアイテム（製品、記事、ムービーなど）を表示している場合、次のような他のアイテムをプロモーションできます。<ul><li>訪問者の地域で利用可能</li></ul>**例**:訪問者の地理的な地域で利用できる品目のみをレコメンデーションする場合。<br>フィルタールールは次のようになります。<br>`availableGeographies list contains an item in user.currentGeography`<br>**注意**:この演算子を使用する場合、ルールの [右側にリストが必要](#caveats) です。 |
| はリスト<br>に含まれていません(プロファイル属性の一致とパラメータの一致で使用可能)。 | プロファイル属性の一致で「リストに含まれない」演算子を使用して、訪問者がWebサイト上のアイテム（製品、記事、ムービーなど）を表示している場合、以下の他のアイテムを除外できます。<ul><li>訪問者が最近閲覧した10品目のリスト</li></ul></ul>**例**:訪問者が最近閲覧したが興味を示さなかった品目をプロモーションしない。<br>フィルタリングルールは次のようになります。<br>`id is not contained in list user.lastViewedItems`<br>**注意**:この演算子を使用する場合、ルールの [右側にリストが必要](#caveats) です。 |
| リストには、<br>(エンティティ属性の一致、プロファイル属性の一致、パラメータの一致で使用可能)内の項目が含まれます。 | プロファイル属性の一致で「リストに含まれるアイテム」演算子を使用して、訪問者がWebサイト上のアイテム(スポーツイベントやコンサートなど)を表示している場合、次のような他のアイテムをプロモーションできます。<ul><li>訪問者のお気に入りのチームの1つに関連付けられています</li></ul>**例**:訪問者のお気に入りのチームの1つに関連付けられたゲームをレコメンデーションしたい。<br>フィルタリングルールは次のようになります。<br>` teamsPlaying list contains an item in user.favoriteTeams`<br>**注意**:この演算子を使用する場合、ルールの [両](#caveats) 側にリストが必要です。 |
| リストに<br>に項目が含まれていません(エンティティ属性の一致、プロファイル属性の一致、パラメーターの一致で使用可能)。 | 訪問者がWebサイト上のアイテム（製品、記事、ムービーなど）を表示しているときに、パラメーター属性の一致で「リストーにアイテムが含まれません」演算子を使用すると、次のような他のアイテムを除外できます。<ul><li>禁止型のリストに含まれる</li></ul>**例**:タバコやアルコールなど、大人の訪問者が利用できる商品を除外する場合。<br>フィルタリングルールは次のようになります。<br>`itemType is not contained in list mbox.prohibitedTypes`<br>**注意**:この演算子を使用する場合、ルールの [両](#caveats) 側にリストが必要です。 |
| リストには、<br>(エンティティ属性の一致、プロファイル属性の一致、パラメータの一致で使用可能)内のすべての項目が含まれます。 | プロファイル属性の一致で「リストに含まれるすべてのアイテムを含む」演算子を使用して、訪問者がWebサイト上のアイテム（ジョブの投稿やレシピなど）を表示している場合、次のような他のアイテムをプロモーションできます。<ul><li>一連のスキルを含める</li><li>必要な材料のセットを含めます</li></ul>**例1**:訪問者に一連のスキル(Java、C++、HTML)があるとします。カタログ内の項目は、必要なスキル（JavaおよびHTML）を持つジョブです。 訪問者にジョブを勧める前に、訪問者のプロファイルに必要なすべてのスキルが含まれていることを確認する必要があります。<br>フィルタリングルールは次のようになります。<br>`profile.jobSeekerSkills contains all items in entity.requiredSkills`<br>**例2**:例えば、あるユーザーがパントリーの材料のリストを持っているとします。レシピは必要な成分のリストを持つ。 訪問者にレシピを勧める前に、訪問者のプロファイルーに必要な材料がすべて含まれていることを確認する必要があります。<br>フィルタリングルールは次のようになります。<br>`profile.ingredientsInPantry contains all items in recipe.ingredientsRequired`<br>**注意**:この演算子を使用する場合、ルールの [両](#caveats) 側にリストが必要です。 |
| <br>(エンティティ属性の一致、プロファイル属性の一致、パラメータの一致で使用可能)内のすべての項目がリストに含まれていません。 | エンティティ属性の一致で「リストに含まれないすべてのアイテムを含む」演算子を使用すると、訪問者がWebサイト上のアイテム(スポーツイベントやコンサートなど)を表示している場合に、次のその他のアイテムをプロモーションできます。<ul><li>一連のチームを含めない</li></ul>**例**:スポーツイベントに2つのチームが含まれるとします。ヒューストン・アストロスとミルウォーキーの醸造家訪問者のプロファイルは、この訪問者がこれらのチームのゲームを表示したくないことを示します。 これらのチームがプレイ中の場合は、必ずゲームを推奨しないようにします。<br>フィルタリングルールは次のようになります。<br>`profile.leastfavoriteTeams does not contain all items in entity.teamsPlaying`<br>**注意**:この演算子を使用する場合、ルールの [両](#caveats) 側にリストが必要です。 |

## エンティティ属性の一致、プロファイル属性の一致、パラメーターの一致でフィルタリングする際の空の値の処理{#section_7D30E04116DB47BEA6FF840A3424A4C8}

終了条件とプロモーションに対して、[!UICONTROL プロファイル属性の一致]、[!UICONTROL エンティティ属性の一致]および[!UICONTROL パラメーターの一致]でフィルタリングする際に、空の値を処理するオプションをいくつか選択できます。

以前は、値が空の場合は何も結果が返されませんでした。次の図のように、「*x* が空の場合」ドロップダウンリストを使用することで、条件に空の値があった場合に実行する処理を選択できます。

![](assets/empty_value.png)

処理を選択するには、歯車アイコン（![](assets/icon_gear.png)）にマウスポインターを置いてから、目的の処理を選択します。

| アクション | 利用できるマッチング | 詳細 |
|--- |--- |--- |
| [!UICONTROL このフィルタールールを無視] | [!UICONTROL プロファイル属性] の一致と [!UICONTROL パラメータの一致] | このアクションは、[!UICONTROL プロファイル属性の一致]と[!UICONTROL パラメーターの一致]のデフォルトです。<br>このオプションではルールを無視するよう指定します。例えば、3 つのフィルタールールがあり、3 つ目のルールでは何も値が返されなかった場合は、何も結果を返さないのではなく、値が空だった 3 つ目のルールのみを無視できます。 |
| [!UICONTROL この条件の結果を表示しない]<br>（条件のみ） | [!UICONTROL エンティティ属性の一致]、 [!UICONTROL プロファイル属性の一致]、 [!UICONTROL パラメータの一致] | このアクションは、[!UICONTROL エンティティ属性の一致]のデフォルトです。<br>次のアクションでは、このオプションが追加される前に空の値を [!DNL Target] 処理します。この条件の結果は表示されません。 |
| [!UICONTROL どの項目もプロモーションしない<br>（プロモーションのみ）] | [!UICONTROL エンティティ属性の一致]、 [!UICONTROL プロファイル属性の一致]、 [!UICONTROL パラメータの一致] | このアクションは、[!UICONTROL エンティティ属性の一致]のデフォルトです。<br>次のアクションでは、このオプションが追加される前に空の値を [!DNL Target] 処理します。この条件の結果は表示されません。 |
| [!UICONTROL 静的値を使用] | [!UICONTROL エンティティ属性の一致]、 [!UICONTROL プロファイル属性の一致]、 [!UICONTROL パラメータの一致] | 値が空だった場合に静的値を使用するよう設定できます。 |

## 注意事項 {#caveats}

>[!IMPORTANT]
>
>データタイプが異なる属性に対して「次に等しい」および「等しくない」演算子を使用した動的な条件またはプロモーションでは、実行時に互換性がない可能性があります。左側に定義済みの属性またはカスタム属性がある場合は、右側に[!UICONTROL 値]、[!UICONTROL 利益幅]、[!UICONTROL 在庫]および[!UICONTROL 環境]の値を使用するのが賢明です。

![](assets/left_right.png)

以下の表に、効果的なルールと実行時に互換性のない可能性のあるルールを示します。

| 互換性のあるルール | 互換性のない可能性のあるルール |
|--- |--- |
| value - is between - 90% and 110% of current item&#39;s - salesValue | salesValue - is between - 90% and 110% of current item&#39;s - value |
| value - is between - 90% and 110% of current item&#39;s - value | clearancePrice - is between - 90% and 110% of current item&#39;s - margin |
| margin - is between - 90% and 110% of current item&#39;s - margin | storeInventory - equals - current item&#39;s - inventory |
| inventory - equals - current item&#39;s - inventory |  |
