---
keywords: creating custom criteria;algorithms;criteria;recommendations criteria;csv;ftp;upload csv
description: CSV ファイルをアップロードしてレコメンデーションをカスタマイズします。
title: カスタム条件のアップロード
feature: criteria
uuid: e0b4d320-db00-43ad-b49e-ce36c8532320
translation-type: tm+mt
source-git-commit: 66b3c42181daf582c9b3bee1f83a2229b823c5c3
workflow-type: tm+mt
source-wordcount: '1873'
ht-degree: 66%

---


# ![PREMIUM](/help/assets/premium.png) カスタム条件のアップロード{#upload-custom-criteria}

CSV ファイルをアップロードしてレコメンデーションをカスタマイズします。

## 新しい条件を作成画面にアクセスする

[!UICONTROL 新しい条件を作成]画面を表示するには、複数の方法があります。一部の画面オプションは、画面の表示方法によって異なります。

* **[!UICONTROL Recommendations]** / **[!UICONTROL 条件]** ライブラリ画面で、条件を作成 **[!UICONTROL /条件を作成をクリックし]******&#x200B;ます。 ここで作成した条件は、自動的にすべての [!DNL Recommendations] アクティビティで利用できるようになります。
* Visual Experience Composer [!DNL Recommendations] (VEC)を使用してアクティビティを作成する場合、ページ上の要素を選択し、「Recommendationsの置き換え、Recommendationsの置き換え、の挿入、Recommendationsの [!UICONTROL 挿入」をクリックした後、すぐに「基準の] 選択 」画面に移動します。 その後、使用可能な条件を選択するか、「条件を **[!UICONTROL 作成]**」をクリックします。 新しい条件を作成する場合は、他の [!DNL Recommendations] アクティビティで使用できるように条件を保存できます。 For more information, see [Create a Recommendations activity](/help/c-recommendations/t-create-recs-activity/create-recs-activity.md).
* [!DNL Recommendations] アクティビティを編集している場合、ページの「 [!UICONTROL レコメンデーションの場所]」ボックスをクリックして、「**[!UICONTROL 条件を変更]**」を選択します。On the [!UICONTROL Select Criteria] screen, click **[!UICONTROL Create Criteria]**. 他の [!DNL Recommendations] アクティビティで使用するために新しい条件を保存するオプションがあります。

次の手順は、最初の方法で  新しい条件を作成画面にアクセスすることを前提としています。 **[!UICONTROL Recommendations]** / **[!UICONTROL 条件]** ライブラリ画面。

1. **[!UICONTROL Recommendations]** / **[!UICONTROL 条件]**&#x200B;をクリックします。

1. 条件 **[!UICONTROL を]** 作成 **[!UICONTROL /カスタム条件を]**&#x200B;アップロードをクリックします。

1. 次のセクションで情報を設定します。

## 基本情報 {#info}

1. 「**[!UICONTROL 条件名]**」を入力します。

   これは、条件の説明に使用される「内部」名です。例えば、条件を「利幅の高い商品」と呼びたいが、正式に表示されるタイトルにはそれを使いたくないという場合があります。公開されるタイトルを設定するには、次の手順を参照してください。

   ![Basic Information」セクションで、以下の手順に従ってください。](/help/c-recommendations/c-algorithms/assets/basic-information.png)

1. この条件を使用するすべての Recommendations 用にページに表示する、公開される「**[!UICONTROL 表示されるタイトル]**」を入力します。

   例えば、この条件を使用してレコメンデーションを表示する際に、「これを表示したひとはこれも表示しています」または「類似の商品」と表示したい場合があります。

1. 条件の簡単な&#x200B;**[!UICONTROL 説明]**&#x200B;を入力します。

   説明は条件の特定に役立ちます。説明には条件の目的に関する情報が含まれる場合があります。

1. 「**[!UICONTROL 業種]**」を次の中から選択します。

   * [!UICONTROL 小売／e コマース]
   * [!UICONTROL リードジェネレーション／B2B／金融サービス]
   * [!UICONTROL メディア／投稿]

   その他の条件オプションは、選択した業種によって異なります。

1. **[!UICONTROL ページタイプ]**&#x200B;を選択します。

   複数のページタイプを選択できます。

   業種とページタイプをともに使用して、保存した条件を分類し、他の [!DNL Recommendations] アクティビティで簡単に再利用できるようにします。

1. 「**[!UICONTROL レコメンデーションキー]**」を選択します。

   キーに基づく条件の設定について詳しくは、[レコメンデーションキーに基づくレコメンデーションの設定](/help/c-recommendations/c-algorithms/base-the-recommendation-on-a-recommendation-key.md)を参照してください。

1. 「**[!UICONTROL レコメンデーションロジック]**」を選択します。

   レコメンデーションロジックのオプションについて詳しくは、[条件](../../c-recommendations/c-algorithms/algorithms.md)を参照してください。

   >[!NOTE]
   >
   >If you select **[!UICONTROL Items]**/ **[!UICONTROL Media with Similar Attributes]**, you will have the option to set [content similarity rules](#similarity).

## コンテンツ {#content}

Content rules determine what happens if the number of recommended items does not fill your [recommendations design](/help/c-recommendations/c-design-overview/design-overview.md). [!DNL Recommendations] の条件によって、デザインが呼び出すよりも少ないレコメンデーションを返すことがあります。例えば、デザインに4つの品目用のスロットがあり、条件によって2つの品目のみがレコメンデーションされる場合、残りのスロットを空のままにするか、代替レコメンデーションを使用して追加のスロットを埋めることができます。

![コンテンツセクション](/help/c-recommendations/c-algorithms/assets/content.png)

1. （オプション）「 **[!UICONTROL Partial Design Rendering]** 」トグルを「on」位置にスライドします。

   塗りつぶされるスロットはできるだけ多くありますが、デザインテンプレートに残りのスロット用の空白スペースが含まれる場合があります。 このオプションを無効にした場合、使用可能なすべてのスロットを満たすのに十分なコンテンツがないと、recommendationsは提供されず、代わりにデフォルトコンテンツが表示されます。

   空白のスロットでレコメンデーションを提供する場合は、このオプションを有効にします。 次の手順で説明するように、サイトの類似したコンテンツまたは人気のあるコンテンツで埋められた空のスロットに条件に基づいてレコメンデーションスロットにコンテンツを挿入する場合は、代替レコメンデーションを使用します。

1. （オプション）「バックアップ **[!UICONTROL Recommendationsを表示]** 」トグルを「オン」位置にスライドします。

   デザインの残りの空のスロットに、サイト全体から最も多く閲覧された製品をランダムに選択して入力します。

   代替レコメンデーションを使用すると、レコメンデーションデザインで使用可能なスロットがすべて埋まるようになります。 次の図に示すように、4 x 1のデザインがあるとします。

   ![4 x 1デザイン](/help/c-recommendations/c-design-overview/assets/velocity_example.png)

   条件によって2つの品目のみがレコメンデーションされるとします。 [ [!UICONTROL 部分的なデザインレンダリング] ]オプションを有効にした場合、最初の2つのスロットは満たされますが、残りの2つのスロットは空のままです。 ただし、「バックアップRecommendationsを  表示」オプションを有効にした場合、指定した条件に基づいて最初の2つのスロットが埋められ、残りの2つのスロットは代替レコメンデーションに基づいて埋められます。

   次の表に、 [!UICONTROL 部分設計レンダリングと] バックアップRecommendations  (Backup Design Rendering)オプションを使用する場合の結果を示します。

   | デザインの部分レンダリング | 代替レコメンデーション | 結果 |
   |--- |--- |--- |
   | 無効 | 無効 | 返されたレコメンデーションがデザインで指定されているよりも少ない場合、レコメンデーションデザインはデフォルトコンテンツに置き換えられ、レコメンデーションは表示されません。 |
   | 有効 | 無効 | デザインはレンダリングされますが、返されたレコメンデーションがデザインで指定されているよりも少ない場合、空白スペースが含まれることがあります。 |
   | 有効 | 有効 | 使用可能なデザインの「スロット」に代替レコメンデーションが挿入され、デザインが完全にレンダリングされます。<br>インクルージョンルールを代替レコメンデーションに適用するとデザインに挿入できなくなるほど適格な代替レコメンデーションの数が制限される場合、デザインは部分的にレンダリングされます。<br>この基準がレコメンデーションを返さず、インクルージョンルールが代替レコメンデーションをゼロに制限する場合、デザインはデフォルトコンテンツで置き換えられます。 |
   | 無効 | 有効 | 使用可能なデザインの「スロット」に代替レコメンデーションが挿入され、デザインが完全にレンダリングされます。<br>インクルージョンルールを代替レコメンデーションに適用するとデザインに挿入できなくなるほど適格な代替レコメンデーションの数が制限される場合、デザインはデフォルトコンテンツに置き換えられ、レコメンデーションは表示されません。 |

   詳しくは、「代替レコメンデーションの [使用](/help/c-recommendations/c-algorithms/backup-recs.md)」を参照してください。

1. （条件付き）前の手順で「代替Recommendations **[!UICONTROL を表示」を選択した場合]** 、「代替レコメンデーションにインクルージョンルールを **[!UICONTROL 適用]**」を有効にできます。

   インクルージョンルールは、レコメンデーションに含める品目を決定します。 使用できるオプションは、業種によって異なります。

   For more details, see [Specify inclusion rules](#inclusion) below.

1. （オプション）「以前購入した **[!UICONTROL レコメンデーション品目]** 」トグルを「オン」位置にスライドします。

   この設定は、`productPurchasedId` に基づいています。デフォルトの動作では、以前に購入された品目はレコメンドされません。ほとんどの場合、顧客が最近購入した品目を再び推奨することは望ましくありません。カヤックなど、通常 1 回しか購入しない品目を販売する場合に便利です。シャンプーや他の個人用品など、繰り返し購入に戻る品目を販売する場合は、このオプションを有効にする必要があります。

## インクルージョンルール {#inclusion}

いくつかのオプションを使用して、レコメンデーションに表示する品目を絞り込むことができます。条件やプロモーションの作成時にインクルージョンルールを使用できます。

![インクルージョンルール](/help/c-recommendations/c-algorithms/assets/inclusion-rules.png)

インクルージョンルールはオプションです。ただし、これらの詳細を設定すると、レコメンデーションに表示される項目をさらに制御できるようになります。詳細を設定するたびに、表示基準をより詳細に絞り込むことができます。

例えば、在庫数が 50 を超えていて、価格が $25～$45 の婦人靴だけを表示するよう選択できます。また、ビジネス上非常に重要な品目が最も表示されやすくなるように各属性に対して重みを付けることもできます。

別の例として、サイトにアクセスした訪問者のうち、特定の都市にいて、特定の学位を取得している訪問者に求人情報を表示できます。

インクルージョンルールのオプションは、業種によって異なります。デフォルトでは、インクルージョンルールは代替レコメンデーションに適用されます。

>[!IMPORTANT]
>
>インクルージョンルールは使用する際に注意が必要です。例えば、会社で、あるブランドが表示されているときに別のブランドをレコメンデーションしないというルールがある場合に、このフィルターは便利です。ただし、この機能には機会費用が伴う場合があります。アクティビティ条件によって通常表示されると考えられる一部の品目を、表示しないように制限することで、上昇率が減少する可能性があります。

インクルージョンルールは、AND で結合されます。品目がレコメンデーションに含まれるためには、すべてのルールを満たす必要があります。

上述の例のように、在庫数が 50 を超えていて、価格が $25～$45 の婦人靴だけを表示するシンプルなインクルージョンルールは、次の手順で作成できます。

1. レコメンデーションする商品の価格帯を設定します。
1. レコメンデーションする商品の最小在庫数を設定します。
1. 特定の基準を満たす場合のみ品目を表示するよう、レコメンデーションを設定します。

   ![](assets/Recs_InclusionRules.png)

   一覧にある属性のいずれかが、1 つまたは複数の指定の条件を満たす、あるいは満たさない場合のみ、品目を含めるよう指定できます。

   使用できる評価演算子は、最初のドロップダウンで選択する値によって異なります。複数の品目を指定することができます。この品目は、OR で評価されます。

   複数のルールは、AND で結合できます。

   >[!NOTE]
   >
   >このオプションは、レコメンデーションに表示される品目を限定します。そのレコメンデーションがどのページに表示されるかには影響しません。レコメンデーションを表示する場所を制限するには、Experience Composer でページを選択します。

For more information, see [Use dynamic and static inclusion rules](/help/c-recommendations/c-algorithms/use-dynamic-and-static-inclusion-rules.md).

## CSVのアップロード

1. CSV ファイルの&#x200B;**[!UICONTROL 場所]**&#x200B;を選択します。

   ![「CSV」セクションのアップロード](/help/c-recommendations/c-algorithms/assets/upload-csv.png)

   アップロードを成功させるには、CSV ファイルが正しくフォーマットされている必要があります。「**[!UICONTROL CSV テンプレートのダウンロード]**」をクリックして、正しくフォーマットされた CSV ファイルをダウンロードします。

   次の 2 つの場所のオプションがあります。

   * **FTP：** FTP サーバーから CSV ファイルをアップロードするには、「**[!UICONTROL FTP]**」を選択し、必要な情報を入力します。CSV ファイルを安全に送信するために FTPS プロトコルを使用する、SSL の使用を選択することもできます。
   * **URL:** URLからCSVファイルをアップロードするには、「 **[!UICONTROL URL]**」を選択し、フィードURLを入力します。

1. 「**[!UICONTROL 保存]**」をクリックします。

   >[!NOTE]
   >
   >カスタム条件エンティティ（行）は、最大 1,000 のレコメンデーション品目（列）を含むことができます。

カスタム条件の更新は、デフォルトでは「累積的」です。既存のキーと値のペアが、CSV アップロードファイルで指定した新しいキーと値のペアで上書きされます。CSV アップロードで指定されたキーを持たない既存のキーと値のペアは、依然として配信に使用でき、CSV ファイルの一部として最後にアップロードしたときから 31 日で期限が切れます。

クライアントケアに連絡して、次回の CSV アップロードに含まれていない既存の結果を破棄できるようにします。この設定を有効にすると、カスタム CSV フィードファイルに存在するキーだけが配信可能になります。この設定は、すべてのカスタム条件に適用されます。

カスタム条件フィードは 24 時間ごとに更新されます。

カスタム条件のアップロードと同期のステータスは、レコメンデーション／条件ページの各条件カードの下部に表示されます。また、カスタム条件の編集時に編集ダイアログボックスにも表示されます。

エラーが起こらなかった場合のアップロードの流れは、スケジュール設定／フィードファイルのダウンロード／読み込み／成功となります。

The following are possible error messages you might receive if [!DNL Target] encounters a problem with the upload:

| エラーメッセージ | 詳細 |
|--- |--- |
| 不明なエラー | 技術的な内部エラーを示します。 |
| 解析エラー | フィードファイルの形式に問題がある可能性があります。ファイルの形式を修正し、アルゴリズムを保存し直します。そうすると、ファイルのダウンロードプロセスが再度開始されます。 |
| サーバーが見つかりません | インターネット上で認識可能な IP またはホスト名を指定します。 |
| 資格情報エラー | サーバーでアクティブなアカウントの有効なユーザー名とパスワードを指定します。 |
| ディレクトリが見つかりません | サーバーに存在するディレクトリを指定します。 |
| ファイルが見つかりません | サーバー上の指定したディレクトリに存在するファイルの名前を指定します。 |

## トレーニングビデオ：Recommendations の条件の作成（12:33） ![チュートリアルバッジ](/help/assets/tutorial.png)

このビデオには次の情報が含まれています（カスタム条件のアップロードの詳細は、11:43から始まります）。

* 条件の作成
* 条件のシーケンスの作成
* カスタム条件のアップロード

>[!VIDEO](https://video.tv.adobe.com/v/27694?quality=12)